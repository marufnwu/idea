# Ultimate IELTS Mock Test App - Complete Architecture Documentation

## ğŸ“‹ **Table of Contents**

1. [System Overview](#system-overview)
2. [High-Level Architecture](#high-level-architecture)
3. [Complete User Journey Flows](#complete-user-journey-flows)
4. [AI Integration Architecture](#ai-integration-architecture)
5. [Data Architecture](#data-architecture)
6. [Microservices Breakdown](#microservices-breakdown)
7. [Security Architecture](#security-architecture)
8. [Scalability & Performance](#scalability-performance)
9. [Cost Management](#cost-management)
10. [Deployment Architecture](#deployment-architecture)
11. [Monitoring & Analytics](#monitoring-analytics)
12. [Business Logic](#business-logic)

---

## ğŸ¯ **System Overview**

### **Platform Vision**
A comprehensive AI-powered IELTS preparation platform that:
- **Generates** authentic test questions using AI
- **Evaluates** all four modules (Listening, Reading, Writing, Speaking) using AI
- **Provides** detailed feedback with band scores
- **Personalizes** learning paths based on performance
- **Tracks** progress over time
- **Predicts** likely band scores for actual IELTS test

### **Core Capabilities**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             PLATFORM CAPABILITIES                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚  AI-Powered Features:                                â”‚
â”‚  âœ“ Dynamic question generation                       â”‚
â”‚  âœ“ Automated evaluation (all modules)                â”‚
â”‚  âœ“ Real-time feedback                                â”‚
â”‚  âœ“ Personalized study plans                          â”‚
â”‚  âœ“ Progress prediction                               â”‚
â”‚  âœ“ Adaptive difficulty adjustment                    â”‚
â”‚                                                       â”‚
â”‚  Test Modules:                                       â”‚
â”‚  âœ“ Listening (AI-generated audio + questions)        â”‚
â”‚  âœ“ Reading (AI-generated passages + questions)       â”‚
â”‚  âœ“ Writing (AI-generated topics + evaluation)        â”‚
â”‚  âœ“ Speaking (AI-generated questions + evaluation)    â”‚
â”‚                                                       â”‚
â”‚  Platform Types:                                     â”‚
â”‚  âœ“ Web Application (Desktop)                         â”‚
â”‚  âœ“ Mobile Apps (iOS & Android)                       â”‚
â”‚  âœ“ Admin Dashboard                                   â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ **High-Level Architecture**

### **Complete System Architecture Diagram**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              USER LAYER                                      â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Web App        â”‚  â”‚   Mobile App     â”‚  â”‚   Admin Panel    â”‚         â”‚
â”‚  â”‚   (Next.js 14)   â”‚  â”‚(React Native +   â”‚  â”‚   (React +       â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚ Expo)            â”‚  â”‚    Material UI)  â”‚         â”‚
â”‚  â”‚  Features:       â”‚  â”‚                  â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚  â€¢ Dashboard     â”‚  â”‚  Features:       â”‚  â”‚  Features:       â”‚         â”‚
â”‚  â”‚  â€¢ Test Taking   â”‚  â”‚  â€¢ All web       â”‚  â”‚  â€¢ User mgmt     â”‚         â”‚
â”‚  â”‚  â€¢ Results       â”‚  â”‚    features      â”‚  â”‚  â€¢ Question bank â”‚         â”‚
â”‚  â”‚  â€¢ Analytics     â”‚  â”‚  â€¢ Push notif    â”‚  â”‚  â€¢ Analytics     â”‚         â”‚
â”‚  â”‚  â€¢ Study Plans   â”‚  â”‚  â€¢ Offline mode  â”‚  â”‚  â€¢ AI monitoring â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚           â†“                     â†“                      â†“                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â†“ HTTPS/WSS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CDN & EDGE LAYER                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Cloudflare CDN                                                      â”‚   â”‚
â”‚  â”‚  â€¢ Static asset caching                                              â”‚   â”‚
â”‚  â”‚  â€¢ DDoS protection                                                   â”‚   â”‚
â”‚  â”‚  â€¢ SSL/TLS termination                                               â”‚   â”‚
â”‚  â”‚  â€¢ Geographic routing                                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API GATEWAY LAYER                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Load Balancer (AWS ALB / Nginx)                                     â”‚   â”‚
â”‚  â”‚  â€¢ Health checks                                                     â”‚   â”‚
â”‚  â”‚  â€¢ Request distribution                                              â”‚   â”‚
â”‚  â”‚  â€¢ SSL termination                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                   â†“                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  API Gateway (Kong / AWS API Gateway)                                â”‚   â”‚
â”‚  â”‚                                                                       â”‚   â”‚
â”‚  â”‚  Features:                                                            â”‚   â”‚
â”‚  â”‚  â€¢ Rate limiting (per user/IP)                                       â”‚   â”‚
â”‚  â”‚  â€¢ Authentication validation (JWT)                                   â”‚   â”‚
â”‚  â”‚  â€¢ Request/Response transformation                                   â”‚   â”‚
â”‚  â”‚  â€¢ API versioning (v1, v2)                                           â”‚   â”‚
â”‚  â”‚  â€¢ Request logging & metrics                                         â”‚   â”‚
â”‚  â”‚  â€¢ CORS handling                                                     â”‚   â”‚
â”‚  â”‚  â€¢ WebSocket upgrade handling                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MICROSERVICES LAYER                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Service Mesh (Istio / Linkerd)                     â”‚  â”‚
â”‚  â”‚              â€¢ Service discovery â€¢ Load balancing                     â”‚  â”‚
â”‚  â”‚              â€¢ Circuit breaking  â€¢ Observability                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ Auth Service  â”‚  â”‚ User Service  â”‚  â”‚ Test Service  â”‚                  â”‚
â”‚  â”‚ (Node.js)     â”‚  â”‚ (Node.js)     â”‚  â”‚ (Node.js)     â”‚                  â”‚
â”‚  â”‚               â”‚  â”‚               â”‚  â”‚               â”‚                  â”‚
â”‚  â”‚ â€¢ Login       â”‚  â”‚ â€¢ Profile     â”‚  â”‚ â€¢ Test CRUD   â”‚                  â”‚
â”‚  â”‚ â€¢ Register    â”‚  â”‚ â€¢ Preferences â”‚  â”‚ â€¢ Sessions    â”‚                  â”‚
â”‚  â”‚ â€¢ JWT tokens  â”‚  â”‚ â€¢ Progress    â”‚  â”‚ â€¢ Submission  â”‚                  â”‚
â”‚  â”‚ â€¢ OAuth       â”‚  â”‚ â€¢ History     â”‚  â”‚ â€¢ Scheduling  â”‚                  â”‚
â”‚  â”‚ â€¢ 2FA         â”‚  â”‚ â€¢ Settings    â”‚  â”‚ â€¢ Validation  â”‚                  â”‚
â”‚  â”‚               â”‚  â”‚               â”‚  â”‚               â”‚                  â”‚
â”‚  â”‚ Port: 3001    â”‚  â”‚ Port: 3002    â”‚  â”‚ Port: 3003    â”‚                  â”‚
â”‚  â”‚ DB: PostgreSQLâ”‚  â”‚ DB: PostgreSQLâ”‚  â”‚ DB: PostgreSQLâ”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚Question Gen   â”‚  â”‚ Evaluation    â”‚  â”‚ Audio Process â”‚                  â”‚
â”‚  â”‚Service        â”‚  â”‚ Service       â”‚  â”‚ Service       â”‚                  â”‚
â”‚  â”‚(Python/Node)  â”‚  â”‚(Python/Node)  â”‚  â”‚ (Python)      â”‚                  â”‚
â”‚  â”‚               â”‚  â”‚               â”‚  â”‚               â”‚                  â”‚
â”‚  â”‚ â€¢ Listening Q â”‚  â”‚ â€¢ Writing evalâ”‚  â”‚ â€¢ STT (Whisperâ”‚                  â”‚
â”‚  â”‚ â€¢ Reading Q   â”‚  â”‚ â€¢ Speaking    â”‚  â”‚ â€¢ Audio qual  â”‚                  â”‚
â”‚  â”‚ â€¢ Writing Q   â”‚  â”‚   eval        â”‚  â”‚ â€¢ Validation  â”‚                  â”‚
â”‚  â”‚ â€¢ Speaking Q  â”‚  â”‚ â€¢ Reading evalâ”‚  â”‚ â€¢ Storage     â”‚                  â”‚
â”‚  â”‚ â€¢ Validation  â”‚  â”‚ â€¢ Scoring     â”‚  â”‚ â€¢ Streaming   â”‚                  â”‚
â”‚  â”‚               â”‚  â”‚               â”‚  â”‚               â”‚                  â”‚
â”‚  â”‚ Port: 3004    â”‚  â”‚ Port: 3005    â”‚  â”‚ Port: 3006    â”‚                  â”‚
â”‚  â”‚ DB: MongoDB   â”‚  â”‚ DB: PostgreSQLâ”‚  â”‚ DB: PostgreSQLâ”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ Payment       â”‚  â”‚ Analytics     â”‚  â”‚ Notification  â”‚                  â”‚
â”‚  â”‚ Service       â”‚  â”‚ Service       â”‚  â”‚ Service       â”‚                  â”‚
â”‚  â”‚(Node.js)      â”‚  â”‚(Python/Node)  â”‚  â”‚ (Node.js)     â”‚                  â”‚
â”‚  â”‚               â”‚  â”‚               â”‚  â”‚               â”‚                  â”‚
â”‚  â”‚ â€¢ Stripe      â”‚  â”‚ â€¢ Progress    â”‚  â”‚ â€¢ Email (SES) â”‚                  â”‚
â”‚  â”‚ â€¢ PayPal      â”‚  â”‚ â€¢ Insights    â”‚  â”‚ â€¢ Push (FCM)  â”‚                  â”‚
â”‚  â”‚ â€¢ Subscript   â”‚  â”‚ â€¢ Reports     â”‚  â”‚ â€¢ SMS (Twilio)â”‚                  â”‚
â”‚  â”‚ â€¢ Invoices    â”‚  â”‚ â€¢ Predictions â”‚  â”‚ â€¢ WebSocket   â”‚                  â”‚
â”‚  â”‚ â€¢ Refunds     â”‚  â”‚ â€¢ Benchmarks  â”‚  â”‚ â€¢ In-app      â”‚                  â”‚
â”‚  â”‚               â”‚  â”‚               â”‚  â”‚               â”‚                  â”‚
â”‚  â”‚ Port: 3007    â”‚  â”‚ Port: 3008    â”‚  â”‚ Port: 3009    â”‚                  â”‚
â”‚  â”‚ DB: PostgreSQLâ”‚  â”‚ DB: PostgreSQLâ”‚  â”‚ DB: Redis     â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ Report Gen    â”‚  â”‚AI Orchestrationâ”‚ â”‚ Media Service â”‚                  â”‚
â”‚  â”‚ Service       â”‚  â”‚ Service        â”‚  â”‚ (Node.js)     â”‚                  â”‚
â”‚  â”‚(Node.js)      â”‚  â”‚ (Python)       â”‚  â”‚               â”‚                  â”‚
â”‚  â”‚               â”‚  â”‚                â”‚  â”‚               â”‚                  â”‚
â”‚  â”‚ â€¢ PDF gen     â”‚  â”‚ â€¢ AI routing   â”‚  â”‚ â€¢ Image proc  â”‚                  â”‚
â”‚  â”‚ â€¢ Charts      â”‚  â”‚ â€¢ Prompt mgmt  â”‚  â”‚ â€¢ Audio proc  â”‚                  â”‚
â”‚  â”‚ â€¢ Analytics   â”‚  â”‚ â€¢ Cost track   â”‚  â”‚ â€¢ TTS gen     â”‚                  â”‚
â”‚  â”‚ â€¢ Export      â”‚  â”‚ â€¢ Load balance â”‚  â”‚ â€¢ Chart gen   â”‚                  â”‚
â”‚  â”‚ â€¢ Templates   â”‚  â”‚ â€¢ Caching      â”‚  â”‚ â€¢ CDN upload  â”‚                  â”‚
â”‚  â”‚               â”‚  â”‚                â”‚  â”‚               â”‚                  â”‚
â”‚  â”‚ Port: 3010    â”‚  â”‚ Port: 3011     â”‚  â”‚ Port: 3012    â”‚                  â”‚
â”‚  â”‚ DB: PostgreSQLâ”‚  â”‚ DB: MongoDB    â”‚  â”‚ DB: S3        â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MESSAGE QUEUE LAYER                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  RabbitMQ / AWS SQS / Redis Queue                                     â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  Queues:                                      Priority Levels:        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â€¢ Critical (0-5 sec)    â”‚  â”‚
â”‚  â”‚  â”‚ 1. question-generation-queue        â”‚    â€¢ High (5-30 sec)       â”‚  â”‚
â”‚  â”‚  â”‚    - Listening questions            â”‚    â€¢ Medium (30-60 sec)    â”‚  â”‚
â”‚  â”‚  â”‚    - Reading passages               â”‚    â€¢ Low (1-5 min)         â”‚  â”‚
â”‚  â”‚  â”‚    - Writing topics                 â”‚    â€¢ Batch (async)         â”‚  â”‚
â”‚  â”‚  â”‚    - Speaking questions             â”‚                            â”‚  â”‚
â”‚  â”‚  â”‚                                     â”‚                            â”‚  â”‚
â”‚  â”‚  â”‚ 2. evaluation-queue                 â”‚    Dead Letter Queue:      â”‚  â”‚
â”‚  â”‚  â”‚    - Writing evaluation (HIGH)      â”‚    â€¢ Failed jobs           â”‚  â”‚
â”‚  â”‚  â”‚    - Speaking evaluation (HIGH)     â”‚    â€¢ Retry mechanism       â”‚  â”‚
â”‚  â”‚  â”‚    - Reading evaluation (MEDIUM)    â”‚    â€¢ Alert on failure      â”‚  â”‚
â”‚  â”‚  â”‚                                     â”‚                            â”‚  â”‚
â”‚  â”‚  â”‚ 3. audio-processing-queue           â”‚    Features:               â”‚  â”‚
â”‚  â”‚  â”‚    - Audio upload (CRITICAL)        â”‚    â€¢ Delayed jobs          â”‚  â”‚
â”‚  â”‚  â”‚    - STT processing (HIGH)          â”‚    â€¢ Job scheduling        â”‚  â”‚
â”‚  â”‚  â”‚    - Audio quality check (MEDIUM)   â”‚    â€¢ Progress tracking     â”‚  â”‚
â”‚  â”‚  â”‚                                     â”‚    â€¢ Concurrency control   â”‚  â”‚
â”‚  â”‚  â”‚ 4. notification-queue               â”‚                            â”‚  â”‚
â”‚  â”‚  â”‚    - Email (MEDIUM)                 â”‚                            â”‚  â”‚
â”‚  â”‚  â”‚    - Push notification (HIGH)       â”‚                            â”‚  â”‚
â”‚  â”‚  â”‚    - SMS (HIGH)                     â”‚                            â”‚  â”‚
â”‚  â”‚  â”‚                                     â”‚                            â”‚  â”‚
â”‚  â”‚  â”‚ 5. report-generation-queue          â”‚                            â”‚  â”‚
â”‚  â”‚  â”‚    - PDF reports (LOW)              â”‚                            â”‚  â”‚
â”‚  â”‚  â”‚    - Analytics reports (BATCH)      â”‚                            â”‚  â”‚
â”‚  â”‚  â”‚                                     â”‚                            â”‚  â”‚
â”‚  â”‚  â”‚ 6. ai-request-queue                 â”‚                            â”‚  â”‚
â”‚  â”‚  â”‚    - Batched AI calls (BATCH)       â”‚                            â”‚  â”‚
â”‚  â”‚  â”‚    - Cost optimization              â”‚                            â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     AI INTEGRATION LAYER                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              AI Orchestration Service (Python FastAPI)                â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  Core Functions:                                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ 1. Model Selection Engine                                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    â€¢ Routing logic based on task type                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    â€¢ Cost optimization                                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    â€¢ Quality requirements                                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    â€¢ Load balancing across providers                           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ 2. Prompt Management System                                     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    â€¢ Template storage (MongoDB)                                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    â€¢ Version control                                            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    â€¢ A/B testing framework                                      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    â€¢ Performance tracking                                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ 3. Response Processing                                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    â€¢ JSON parsing & validation                                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    â€¢ Error handling                                             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    â€¢ Retry logic                                                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    â€¢ Response caching                                           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                                                                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ 4. Cost Tracking                                                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    â€¢ Token counting                                             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    â€¢ Cost calculation                                           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    â€¢ Budget alerts                                              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    â€¢ Usage analytics                                            â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                   â†“                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    AI Provider Integrations                           â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
â”‚  â”‚  â”‚   OpenAI     â”‚  â”‚  Anthropic   â”‚  â”‚   Google     â”‚               â”‚  â”‚
â”‚  â”‚  â”‚   GPT-4o     â”‚  â”‚   Claude     â”‚  â”‚   Gemini     â”‚               â”‚  â”‚
â”‚  â”‚  â”‚              â”‚  â”‚  Sonnet 4.5  â”‚  â”‚   Pro 1.5    â”‚               â”‚  â”‚
â”‚  â”‚  â”‚ Use Cases:   â”‚  â”‚              â”‚  â”‚              â”‚               â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Speaking Q â”‚  â”‚ Use Cases:   â”‚  â”‚ Use Cases:   â”‚               â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Speaking   â”‚  â”‚ â€¢ Writing    â”‚  â”‚ â€¢ Listening Qâ”‚               â”‚  â”‚
â”‚  â”‚  â”‚   Evaluation â”‚  â”‚   Evaluation â”‚  â”‚ â€¢ Reading Q  â”‚               â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ General Q  â”‚  â”‚ â€¢ Reading    â”‚  â”‚ â€¢ Cost-eff   â”‚               â”‚  â”‚
â”‚  â”‚  â”‚   Generation â”‚  â”‚   Evaluation â”‚  â”‚   tasks      â”‚               â”‚  â”‚
â”‚  â”‚  â”‚              â”‚  â”‚ â€¢ Deep       â”‚  â”‚ â€¢ Multimodal â”‚               â”‚  â”‚
â”‚  â”‚  â”‚ Cost: $$     â”‚  â”‚   Analysis   â”‚  â”‚              â”‚               â”‚  â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚ Cost: $      â”‚               â”‚  â”‚
â”‚  â”‚  â”‚              â”‚  â”‚ Cost: $$$    â”‚  â”‚              â”‚               â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”‚
â”‚  â”‚  â”‚   Whisper    â”‚  â”‚  ElevenLabs  â”‚  â”‚   Stable     â”‚               â”‚  â”‚
â”‚  â”‚  â”‚     API      â”‚  â”‚     TTS      â”‚  â”‚  Diffusion   â”‚               â”‚  â”‚
â”‚  â”‚  â”‚   (OpenAI)   â”‚  â”‚              â”‚  â”‚              â”‚               â”‚  â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚               â”‚  â”‚
â”‚  â”‚  â”‚ Use Cases:   â”‚  â”‚ Use Cases:   â”‚  â”‚ Use Cases:   â”‚               â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Speech to  â”‚  â”‚ â€¢ Listening  â”‚  â”‚ â€¢ Chart      â”‚               â”‚  â”‚
â”‚  â”‚  â”‚   Text       â”‚  â”‚   audio gen  â”‚  â”‚   generation â”‚               â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Transcript â”‚  â”‚ â€¢ Sample     â”‚  â”‚ â€¢ Diagram    â”‚               â”‚  â”‚
â”‚  â”‚  â”‚   generation â”‚  â”‚   answers    â”‚  â”‚   creation   â”‚               â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Multi-lang â”‚  â”‚ â€¢ High-qual  â”‚  â”‚ â€¢ Visual     â”‚               â”‚  â”‚
â”‚  â”‚  â”‚              â”‚  â”‚   voices     â”‚  â”‚   content    â”‚               â”‚  â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚               â”‚  â”‚
â”‚  â”‚  â”‚ Cost: $      â”‚  â”‚ Cost: $$     â”‚  â”‚ Cost: $      â”‚               â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  Fallback Strategy:                                                   â”‚  â”‚
â”‚  â”‚  Primary â†’ Secondary â†’ Tertiary â†’ Error Handling                     â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  Rate Limiting:                                                       â”‚  â”‚
â”‚  â”‚  â€¢ Per-provider limits                                                â”‚  â”‚
â”‚  â”‚  â€¢ Intelligent queuing                                                â”‚  â”‚
â”‚  â”‚  â€¢ Circuit breaker pattern                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DATA LAYER                                             â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   PostgreSQL     â”‚  â”‚     MongoDB      â”‚  â”‚      Redis       â”‚         â”‚
â”‚  â”‚   (Primary DB)   â”‚  â”‚  (Document DB)   â”‚  â”‚     (Cache)      â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚ Tables:          â”‚  â”‚ Collections:     â”‚  â”‚ Use Cases:       â”‚         â”‚
â”‚  â”‚ â€¢ users          â”‚  â”‚ â€¢ questions      â”‚  â”‚ â€¢ Session store  â”‚         â”‚
â”‚  â”‚ â€¢ test_sessions  â”‚  â”‚ â€¢ prompts        â”‚  â”‚ â€¢ Rate limiting  â”‚         â”‚
â”‚  â”‚ â€¢ submissions    â”‚  â”‚ â€¢ templates      â”‚  â”‚ â€¢ Real-time data â”‚         â”‚
â”‚  â”‚ â€¢ evaluations    â”‚  â”‚ â€¢ ai_logs        â”‚  â”‚ â€¢ Job queues     â”‚         â”‚
â”‚  â”‚ â€¢ payments       â”‚  â”‚ â€¢ question_meta  â”‚  â”‚ â€¢ Leaderboards   â”‚         â”‚
â”‚  â”‚ â€¢ subscriptions  â”‚  â”‚                  â”‚  â”‚ â€¢ Active users   â”‚         â”‚
â”‚  â”‚ â€¢ progress       â”‚  â”‚ Why MongoDB:     â”‚  â”‚ â€¢ Test drafts    â”‚         â”‚
â”‚  â”‚ â€¢ analytics      â”‚  â”‚ â€¢ Flexible       â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚   schema         â”‚  â”‚ TTL: 24 hours    â”‚         â”‚
â”‚  â”‚ Replication:     â”‚  â”‚ â€¢ Fast queries   â”‚  â”‚ for temp data    â”‚         â”‚
â”‚  â”‚ Master-Slave     â”‚  â”‚ â€¢ JSON storage   â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚ Cluster: 3 nodes â”‚         â”‚
â”‚  â”‚ Backup: Daily    â”‚  â”‚ Indexes:         â”‚  â”‚                  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â€¢ tags           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                        â”‚ â€¢ difficulty     â”‚                                â”‚
â”‚                        â”‚ â€¢ test_type      â”‚                                â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  S3 / Cloud      â”‚  â”‚  Elasticsearch   â”‚  â”‚   Vector DB      â”‚         â”‚
â”‚  â”‚  Storage         â”‚  â”‚                  â”‚  â”‚   (Pinecone)     â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚ Buckets:         â”‚  â”‚ Indexes:         â”‚  â”‚ Use Cases:       â”‚         â”‚
â”‚  â”‚ â€¢ audio-files    â”‚  â”‚ â€¢ questions      â”‚  â”‚ â€¢ Semantic       â”‚         â”‚
â”‚  â”‚   - Speaking     â”‚  â”‚ â€¢ user-content   â”‚  â”‚   question       â”‚         â”‚
â”‚  â”‚   - Listening    â”‚  â”‚ â€¢ feedback       â”‚  â”‚   search         â”‚         â”‚
â”‚  â”‚   TTL: 90 days   â”‚  â”‚                  â”‚  â”‚ â€¢ Similar        â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚ Use Cases:       â”‚  â”‚   question       â”‚         â”‚
â”‚  â”‚ â€¢ reports        â”‚  â”‚ â€¢ Full-text      â”‚  â”‚   matching       â”‚         â”‚
â”‚  â”‚   - PDF files    â”‚  â”‚   search         â”‚  â”‚ â€¢ Content        â”‚         â”‚
â”‚  â”‚   TTL: 1 year    â”‚  â”‚ â€¢ Question       â”‚  â”‚   deduplication  â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚   discovery      â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚ â€¢ media          â”‚  â”‚ â€¢ Analytics      â”‚  â”‚ Dimensions:      â”‚         â”‚
â”‚  â”‚   - Images       â”‚  â”‚   queries        â”‚  â”‚ 1536 (OpenAI)    â”‚         â”‚
â”‚  â”‚   - Charts       â”‚  â”‚ â€¢ Autocomplete   â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚   Permanent      â”‚  â”‚                  â”‚  â”‚ Cost: $70/month  â”‚         â”‚
â”‚  â”‚                  â”‚  â”‚ Cluster: 3 nodes â”‚  â”‚                  â”‚         â”‚
â”‚  â”‚ CDN: CloudFront  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚  â”‚                  â”‚                                                       â”‚
â”‚  â”‚ Lifecycle Rules: â”‚                                                       â”‚
â”‚  â”‚ â€¢ Hot â†’ Warm     â”‚                                                       â”‚
â”‚  â”‚   (30 days)      â”‚                                                       â”‚
â”‚  â”‚ â€¢ Warm â†’ Cold    â”‚                                                       â”‚
â”‚  â”‚   (90 days)      â”‚                                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  MONITORING & OBSERVABILITY LAYER                            â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Monitoring Stack                                                     â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚   DataDog /    â”‚  â”‚     Sentry     â”‚  â”‚  ELK Stack     â”‚         â”‚  â”‚
â”‚  â”‚  â”‚   New Relic    â”‚  â”‚                â”‚  â”‚                â”‚         â”‚  â”‚
â”‚  â”‚  â”‚                â”‚  â”‚                â”‚  â”‚ â€¢ Elasticsearchâ”‚         â”‚  â”‚
â”‚  â”‚  â”‚ Metrics:       â”‚  â”‚ Features:      â”‚  â”‚ â€¢ Logstash     â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Latency      â”‚  â”‚ â€¢ Error track  â”‚  â”‚ â€¢ Kibana       â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Throughput   â”‚  â”‚ â€¢ Stack traces â”‚  â”‚                â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Error rate   â”‚  â”‚ â€¢ Alerts       â”‚  â”‚ Features:      â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ CPU/Memory   â”‚  â”‚ â€¢ User context â”‚  â”‚ â€¢ Log aggreg   â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ DB queries   â”‚  â”‚ â€¢ Breadcrumbs  â”‚  â”‚ â€¢ Search       â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ API calls    â”‚  â”‚                â”‚  â”‚ â€¢ Dashboards   â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚  Prometheus +  â”‚  â”‚  CloudWatch    â”‚  â”‚  AI Cost       â”‚         â”‚  â”‚
â”‚  â”‚  â”‚   Grafana      â”‚  â”‚   (AWS)        â”‚  â”‚  Dashboard     â”‚         â”‚  â”‚
â”‚  â”‚  â”‚                â”‚  â”‚                â”‚  â”‚                â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ Metrics:       â”‚  â”‚ Monitors:      â”‚  â”‚ Tracks:        â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Custom       â”‚  â”‚ â€¢ Infrastructureâ”‚ â”‚ â€¢ Token usage  â”‚         â”‚  â”‚
â”‚  â”‚  â”‚   metrics      â”‚  â”‚ â€¢ Services     â”‚  â”‚ â€¢ Cost/request â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Business KPI â”‚  â”‚ â€¢ Alarms       â”‚  â”‚ â€¢ Provider     â”‚         â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Real-time    â”‚  â”‚ â€¢ Auto-scaling â”‚  â”‚   breakdown    â”‚         â”‚  â”‚
â”‚  â”‚  â”‚   dashboards   â”‚  â”‚                â”‚  â”‚ â€¢ Budget alert â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  Alerts:                                                               â”‚  â”‚
â”‚  â”‚  â€¢ Slack/Discord integration                                          â”‚  â”‚
â”‚  â”‚  â€¢ PagerDuty for critical issues                                      â”‚  â”‚
â”‚  â”‚  â€¢ Email for warnings                                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ **Complete User Journey Flows**

### **FLOW 1: User Onboarding & Initial Setup**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER ONBOARDING FLOW                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

START: User visits platform (web/mobile)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Landing Page                                                 â”‚
â”‚ â€¢ Hero section with value proposition                       â”‚
â”‚ â€¢ Feature highlights                                         â”‚
â”‚ â€¢ Sample test preview                                        â”‚
â”‚ â€¢ Testimonials                                               â”‚
â”‚ â€¢ Pricing plans                                              â”‚
â”‚ â€¢ CTA: "Start Free Trial"                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“ User clicks "Start Free Trial"
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Registration Page                                            â”‚
â”‚                                                              â”‚
â”‚ Option 1: Email Registration                                â”‚
â”‚   â€¢ Full name                                               â”‚
â”‚   â€¢ Email address                                           â”‚
â”‚   â€¢ Password (min 8 chars, complexity rules)               â”‚
â”‚   â€¢ Confirm password                                        â”‚
â”‚   â€¢ Terms & Conditions checkbox                            â”‚
â”‚   â†“                                                          â”‚
â”‚   Backend: Auth Service                                     â”‚
â”‚   â€¢ Email validation                                        â”‚
â”‚   â€¢ Password hashing (bcrypt)                              â”‚
â”‚   â€¢ Check for existing user                                â”‚
â”‚   â€¢ Create user record in PostgreSQL                       â”‚
â”‚   â€¢ Send verification email                                â”‚
â”‚   â€¢ Generate JWT tokens (access + refresh)                 â”‚
â”‚                                                              â”‚
â”‚ Option 2: Social OAuth                                      â”‚
â”‚   â€¢ Google Sign-In                                          â”‚
â”‚   â€¢ Facebook Login                                          â”‚
â”‚   â€¢ Apple Sign-In                                           â”‚
â”‚   â†“                                                          â”‚
â”‚   â€¢ OAuth flow handled by Auth Service                     â”‚
â”‚   â€¢ Retrieve user info from provider                       â”‚
â”‚   â€¢ Create/update user in database                         â”‚
â”‚   â€¢ Generate JWT tokens                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Email Verification (if email registration)                  â”‚
â”‚ â€¢ User receives email with verification link               â”‚
â”‚ â€¢ Link expires in 24 hours                                 â”‚
â”‚ â€¢ Click link â†’ Backend verifies token                      â”‚
â”‚ â€¢ Mark email as verified in database                       â”‚
â”‚ â€¢ Redirect to profile setup                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Profile Setup - Step 1: Basic Information                   â”‚
â”‚                                                              â”‚
â”‚ Form Fields:                                                â”‚
â”‚ â€¢ Profile picture (optional)                                â”‚
â”‚ â€¢ Country                                                   â”‚
â”‚ â€¢ Date of birth                                             â”‚
â”‚ â€¢ Native language                                           â”‚
â”‚ â€¢ Current English proficiency (dropdown)                   â”‚
â”‚   - Beginner                                                â”‚
â”‚   - Intermediate                                            â”‚
â”‚   - Advanced                                                â”‚
â”‚                                                              â”‚
â”‚ Backend: User Service                                       â”‚
â”‚ â€¢ Store in PostgreSQL users table                          â”‚
â”‚ â€¢ Upload profile picture to S3 (if provided)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Profile Setup - Step 2: IELTS Goals                         â”‚
â”‚                                                              â”‚
â”‚ Form Fields:                                                â”‚
â”‚ â€¢ Test type:                                                â”‚
â”‚   â—‹ Academic                                                â”‚
â”‚   â—‹ General Training                                        â”‚
â”‚                                                              â”‚
â”‚ â€¢ Target band score (slider 5.0 - 9.0)                     â”‚
â”‚   Visual: Shows what band means (e.g., 7.0 = "Good user")  â”‚
â”‚                                                              â”‚
â”‚ â€¢ Target test date (calendar picker)                       â”‚
â”‚   - Calculates days remaining                              â”‚
â”‚   - Shows recommended study schedule                        â”‚
â”‚                                                              â”‚
â”‚ â€¢ Reason for taking IELTS:                                 â”‚
â”‚   â–¡ University admission                                    â”‚
â”‚   â–¡ Immigration                                             â”‚
â”‚   â–¡ Job requirements                                        â”‚
â”‚   â–¡ Personal development                                    â”‚
â”‚   â–¡ Other: _________                                        â”‚
â”‚                                                              â”‚
â”‚ Backend: User Service                                       â”‚
â”‚ â€¢ Store goals in PostgreSQL                                â”‚
â”‚ â€¢ Trigger analytics calculation                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Profile Setup - Step 3: Weak Areas (Optional)              â”‚
â”‚                                                              â”‚
â”‚ "Which areas would you like to focus on?"                  â”‚
â”‚                                                              â”‚
â”‚ Listening:                                                  â”‚
â”‚ â–¡ Understanding accents                                     â”‚
â”‚ â–¡ Note-taking skills                                        â”‚
â”‚ â–¡ Following conversations                                   â”‚
â”‚ â–¡ Academic lectures                                         â”‚
â”‚                                                              â”‚
â”‚ Reading:                                                    â”‚
â”‚ â–¡ Time management                                           â”‚
â”‚ â–¡ Skimming & scanning                                       â”‚
â”‚ â–¡ True/False/Not Given questions                           â”‚
â”‚ â–¡ Academic vocabulary                                       â”‚
â”‚                                                              â”‚
â”‚ Writing:                                                    â”‚
â”‚ â–¡ Task 1 data description                                   â”‚
â”‚ â–¡ Task 2 essay structure                                    â”‚
â”‚ â–¡ Grammar accuracy                                          â”‚
â”‚ â–¡ Vocabulary range                                          â”‚
â”‚                                                              â”‚
â”‚ Speaking:                                                   â”‚
â”‚ â–¡ Pronunciation                                             â”‚
â”‚ â–¡ Fluency                                                   â”‚
â”‚ â–¡ Grammar while speaking                                    â”‚
â”‚ â–¡ Part 3 abstract topics                                   â”‚
â”‚                                                              â”‚
â”‚ Backend: User Service                                       â”‚
â”‚ â€¢ Store preferences in database                            â”‚
â”‚ â€¢ Will be used for personalized content                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Optional: Initial Diagnostic Test                           â”‚
â”‚                                                              â”‚
â”‚ "Take a quick 15-minute diagnostic test to assess your     â”‚
â”‚  current level?"                                            â”‚
â”‚                                                              â”‚
â”‚ [Skip for now] [Start Diagnostic]                          â”‚
â”‚                                                              â”‚
â”‚ If user clicks "Start Diagnostic":                         â”‚
â”‚   â†“                                                          â”‚
â”‚   Backend: Test Service                                     â”‚
â”‚   â€¢ Generate short test (10 questions per module)          â”‚
â”‚   â€¢ Mixed difficulty levels                                â”‚
â”‚   â†“                                                          â”‚
â”‚   User takes quick test:                                    â”‚
â”‚   â€¢ 3 reading questions (5 min)                            â”‚
â”‚   â€¢ 3 listening questions (5 min)                          â”‚
â”‚   â€¢ 1 writing task (3 min - just outline)                  â”‚
â”‚   â€¢ 2 speaking questions (2 min)                           â”‚
â”‚   â†“                                                          â”‚
â”‚   Backend: Evaluation Service                               â”‚
â”‚   â€¢ Auto-grade reading & listening                         â”‚
â”‚   â€¢ AI quickly evaluates writing & speaking                â”‚
â”‚   â€¢ Calculate estimated current band score                 â”‚
â”‚   â€¢ Identify specific weaknesses                           â”‚
â”‚   â†“                                                          â”‚
â”‚   Results shown to user:                                    â”‚
â”‚   â€¢ Current estimated band: 6.5                            â”‚
â”‚   â€¢ Module breakdown                                        â”‚
â”‚   â€¢ Gap analysis (current vs target)                       â”‚
â”‚   â€¢ Recommended focus areas                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Study Plan Generation                                        â”‚
â”‚                                                              â”‚
â”‚ Backend: Analytics Service                                  â”‚
â”‚   â†“                                                          â”‚
â”‚   Input data:                                               â”‚
â”‚   â€¢ Current level (from diagnostic or self-assessment)     â”‚
â”‚   â€¢ Target band score                                       â”‚
â”‚   â€¢ Target date                                             â”‚
â”‚   â€¢ Weak areas                                              â”‚
â”‚   â€¢ Available study time per day                           â”‚
â”‚   â†“                                                          â”‚
â”‚   AI Orchestration Service called                          â”‚
â”‚   â€¢ Uses GPT-4o with structured prompt                     â”‚
â”‚   â†“                                                          â”‚
â”‚   Generates personalized study plan:                        â”‚
â”‚   {                                                          â”‚
â”‚     "duration_weeks": 12,                                   â”‚
â”‚     "weekly_schedule": {                                    â”‚
â”‚       "monday": {                                           â”‚
â”‚         "focus": "Listening",                               â”‚
â”‚         "tasks": [                                          â”‚
â”‚           "1 full listening test",                          â”‚
â”‚           "Review mistakes",                                â”‚
â”‚           "Practice note-taking"                            â”‚
â”‚         ],                                                   â”‚
â”‚         "time_required": "90 minutes"                       â”‚
â”‚       },                                                     â”‚
â”‚       // ... other days                                     â”‚
â”‚     },                                                       â”‚
â”‚     "milestones": [                                         â”‚
â”‚       {                                                      â”‚
â”‚         "week": 4,                                          â”‚
â”‚         "goal": "Achieve 7.0 in Reading",                  â”‚
â”‚         "action": "Take full reading test"                 â”‚
â”‚       }                                                      â”‚
â”‚     ],                                                       â”‚
â”‚     "recommended_resources": [...],                         â”‚
â”‚     "practice_frequency": {                                 â”‚
â”‚       "full_tests": "2 per week",                          â”‚
â”‚       "module_practice": "daily"                           â”‚
â”‚     }                                                        â”‚
â”‚   }                                                          â”‚
â”‚   â†“                                                          â”‚
â”‚   Store plan in PostgreSQL                                  â”‚
â”‚   Cache in Redis for quick access                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Subscription Selection                                       â”‚
â”‚                                                              â”‚
â”‚ Plans:                                                       â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ FREE PLAN                                            â”‚    â”‚
â”‚ â”‚ $0/month                                             â”‚    â”‚
â”‚ â”‚ â€¢ 3 full tests per month                            â”‚    â”‚
â”‚ â”‚ â€¢ Basic evaluation                                   â”‚    â”‚
â”‚ â”‚ â€¢ Band scores only                                   â”‚    â”‚
â”‚ â”‚ â€¢ Community support                                  â”‚    â”‚
â”‚ â”‚ [Current Plan]                                       â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ BASIC PLAN â­ Most Popular                          â”‚    â”‚
â”‚ â”‚ $19.99/month or $199/year (save 17%)                â”‚    â”‚
â”‚ â”‚ â€¢ 20 full tests per month                           â”‚    â”‚
â”‚ â”‚ â€¢ Detailed AI feedback                              â”‚    â”‚
â”‚ â”‚ â€¢ All 4 module scores                               â”‚    â”‚
â”‚ â”‚ â€¢ Progress tracking                                  â”‚    â”‚
â”‚ â”‚ â€¢ Email support                                      â”‚    â”‚
â”‚ â”‚ â€¢ Downloadable reports                              â”‚    â”‚
â”‚ â”‚ [Select Plan]                                        â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ PREMIUM PLAN ğŸ‘‘                                      â”‚    â”‚
â”‚ â”‚ $39.99/month or $399/year (save 17%)                â”‚    â”‚
â”‚ â”‚ â€¢ Unlimited tests                                    â”‚    â”‚
â”‚ â”‚ â€¢ Advanced AI analysis                              â”‚    â”‚
â”‚ â”‚ â€¢ Personalized study plans                          â”‚    â”‚
â”‚ â”‚ â€¢ 1-on-1 tutor sessions (2/month)                   â”‚    â”‚
â”‚ â”‚ â€¢ Priority support (24/7)                           â”‚    â”‚
â”‚ â”‚ â€¢ Mock interview practice                           â”‚    â”‚
â”‚ â”‚ â€¢ Guaranteed band improvement                       â”‚    â”‚
â”‚ â”‚ [Select Plan]                                        â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚ If user selects paid plan:                                  â”‚
â”‚   â†“                                                          â”‚
â”‚   Redirect to Payment Page                                  â”‚
â”‚   â€¢ Stripe Checkout integration                            â”‚
â”‚   â€¢ Support: Credit/Debit cards, PayPal, Apple Pay        â”‚
â”‚   â†“                                                          â”‚
â”‚   Backend: Payment Service                                  â”‚
â”‚   â€¢ Process payment via Stripe API                         â”‚
â”‚   â€¢ Create subscription in database                        â”‚
â”‚   â€¢ Send confirmation email                                â”‚
â”‚   â€¢ Activate premium features                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Welcome Dashboard                                            â”‚
â”‚                                                              â”‚
â”‚ â€¢ Welcome message with personalized greeting               â”‚
â”‚ â€¢ Current band score (if diagnostic taken)                 â”‚
â”‚ â€¢ Target band score                                         â”‚
â”‚ â€¢ Days until test date                                      â”‚
â”‚ â€¢ Study plan overview                                       â”‚
â”‚ â€¢ Quick action buttons:                                     â”‚
â”‚   [Start Full Test] [Practice Module] [View Progress]      â”‚
â”‚                                                              â”‚
â”‚ â€¢ Today's recommended activities                            â”‚
â”‚ â€¢ Upcoming milestones                                       â”‚
â”‚ â€¢ Achievement badges (gamification)                         â”‚
â”‚                                                              â”‚
â”‚ Backend actions:                                            â”‚
â”‚ â€¢ Log user session                                          â”‚
â”‚ â€¢ Track onboarding completion                              â”‚
â”‚ â€¢ Send welcome email                                        â”‚
â”‚ â€¢ Start analytics tracking                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
END: User ready to start practicing
```

---

### **FLOW 2: AI-Powered Question Generation Flow**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            AI QUESTION GENERATION FLOW (COMPLETE)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TRIGGER: User clicks "Start New Test"
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Test Configuration Screen                                    â”‚
â”‚                                                              â”‚
â”‚ "Configure Your Test"                                       â”‚
â”‚                                                              â”‚
â”‚ Test Type:                                                  â”‚
â”‚ â—‹ Full IELTS Test (2h 45min)                               â”‚
â”‚   - All 4 modules                                           â”‚
â”‚   - Authentic test experience                              â”‚
â”‚                                                              â”‚
â”‚ â—‹ Module Practice                                           â”‚
â”‚   â–¡ Listening only (30 min)                                â”‚
â”‚   â–¡ Reading only (60 min)                                  â”‚
â”‚   â–¡ Writing only (60 min)                                  â”‚
â”‚   â–¡ Speaking only (15 min)                                 â”‚
â”‚                                                              â”‚
â”‚ Test Format:                                                â”‚
â”‚ â—‹ Academic                                                  â”‚
â”‚ â—‹ General Training                                          â”‚
â”‚                                                              â”‚
â”‚ Difficulty Level:                                           â”‚
â”‚ â—‹ Band 5-6 (Beginner-Intermediate)                        â”‚
â”‚ â—‹ Band 6-7 (Intermediate)                                  â”‚
â”‚ â—‹ Band 7-8 (Advanced)                                      â”‚
â”‚ â—‹ Band 8-9 (Expert)                                        â”‚
â”‚                                                              â”‚
â”‚ Advanced Options:                                           â”‚
â”‚ â–¡ Timed mode (strict timing)                               â”‚
â”‚ â–¡ Practice mode (unlimited time)                           â”‚
â”‚ â–¡ Focus on weak areas only                                 â”‚
â”‚                                                              â”‚
â”‚ [Cancel] [Generate Test]                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“ User clicks "Generate Test"
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend Loading Screen                                      â”‚
â”‚ "Generating your personalized test..."                     â”‚
â”‚ [Progress bar animation]                                    â”‚
â”‚ â€¢ Creating unique questions                                 â”‚
â”‚ â€¢ Generating audio files                                    â”‚
â”‚ â€¢ Preparing test environment                                â”‚
â”‚                                                              â”‚
â”‚ Estimated time: 30-60 seconds                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    Frontend sends request to Backend
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend: API Gateway                                         â”‚
â”‚ â€¢ Validates user authentication                             â”‚
â”‚ â€¢ Checks user's subscription plan                           â”‚
â”‚ â€¢ Checks remaining test quota                               â”‚
â”‚ â€¢ Rate limiting check                                        â”‚
â”‚ â†“                                                            â”‚
â”‚ If all checks pass:                                         â”‚
â”‚ â€¢ Forward request to Test Service                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend: Test Service                                        â”‚
â”‚                                                              â”‚
â”‚ Step 1: Create Test Session                                 â”‚
â”‚ â€¢ Generate unique test_session_id (UUID)                   â”‚
â”‚ â€¢ Store in PostgreSQL with status: 'generating'            â”‚
â”‚ â€¢ Record: user_id, test_type, difficulty, timestamp       â”‚
â”‚                                                              â”‚
â”‚ Step 2: Check Question Cache                                â”‚
â”‚ â€¢ Query Redis for recently generated similar tests         â”‚
â”‚ â€¢ Check if cached questions match criteria                 â”‚
â”‚ â€¢ If suitable cache found:                                  â”‚
â”‚   - Use cached questions (cost optimization)               â”‚
â”‚   - Skip AI generation                                      â”‚
â”‚   - Jump to "Test Ready" step                              â”‚
â”‚ â€¢ If no cache or user prefers new questions:               â”‚
â”‚   - Proceed to generation                                   â”‚
â”‚                                                              â”‚
â”‚ Step 3: Retrieve User Context                               â”‚
â”‚ â€¢ Query PostgreSQL for user's test history                 â”‚
â”‚ â€¢ Get previously generated question IDs                    â”‚
â”‚ â€¢ Get user's weak areas                                     â”‚
â”‚ â€¢ Get performance patterns                                  â”‚
â”‚                                                              â”‚
â”‚ Step 4: Add Jobs to Queue                                   â”‚
â”‚ â€¢ Create 4 separate jobs (one per module)                  â”‚
â”‚ â€¢ Add to question-generation-queue                         â”‚
â”‚ â€¢ Priority: High                                            â”‚
â”‚ â€¢ Include context:                                          â”‚
â”‚   {                                                          â”‚
â”‚     test_session_id,                                        â”‚
â”‚     module: "listening/reading/writing/speaking",          â”‚
â”‚     difficulty_level,                                       â”‚
â”‚     test_type: "academic/general",                         â”‚
â”‚     user_history: [previous_question_ids],                 â”‚
â”‚     weak_areas: [...]                                       â”‚
â”‚   }                                                          â”‚
â”‚                                                              â”‚
â”‚ Step 5: Return Response to Frontend                         â”‚
â”‚ â€¢ Status: "generating"                                      â”‚
â”‚ â€¢ test_session_id                                           â”‚
â”‚ â€¢ WebSocket channel for updates                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    Jobs added to RabbitMQ/SQS queue
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend: Question Generator Service (Worker Process)        â”‚
â”‚                                                              â”‚
â”‚ Picks up job from queue                                     â”‚
â”‚ â†“                                                            â”‚
â”‚ Processes based on module type                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    â”œâ”€â”€â†’ LISTENING MODULE GENERATION
    â”‚
    â”œâ”€â”€â†’ READING MODULE GENERATION
    â”‚
    â”œâ”€â”€â†’ WRITING MODULE GENERATION
    â”‚
    â””â”€â”€â†’ SPEAKING MODULE GENERATION

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
LISTENING MODULE GENERATION (Detailed Process)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Question Generator Service: Listening Module                 â”‚
â”‚                                                              â”‚
â”‚ Step 1: Determine Audio Scenarios                           â”‚
â”‚   IELTS Listening has 4 sections:                           â”‚
â”‚   â€¢ Section 1: Social conversation (2 speakers)            â”‚
â”‚   â€¢ Section 2: Monologue (1 speaker, everyday context)     â”‚
â”‚   â€¢ Section 3: Academic conversation (up to 4 speakers)    â”‚
â”‚   â€¢ Section 4: Academic lecture (1 speaker)                â”‚
â”‚                                                              â”‚
â”‚   For each section, select theme based on:                 â”‚
â”‚   â€¢ Difficulty level                                        â”‚
â”‚   â€¢ Previously used themes (avoid repetition)              â”‚
â”‚   â€¢ Common IELTS topics                                     â”‚
â”‚                                                              â”‚
â”‚   Example themes:                                           â”‚
â”‚   Section 1: "Apartment rental inquiry"                    â”‚
â”‚   Section 2: "Local library tour"                          â”‚
â”‚   Section 3: "Group project discussion"                    â”‚
â”‚   Section 4: "Climate change lecture"                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: Generate Conversation Scripts                       â”‚
â”‚                                                              â”‚
â”‚ For each section:                                           â”‚
â”‚   â†“                                                          â”‚
â”‚   Call AI Orchestration Service                            â”‚
â”‚   â†“                                                          â”‚
â”‚   AI Orchestration routes to: Gemini Pro 1.5              â”‚
â”‚   (Cost-effective for script generation)                   â”‚
â”‚   â†“                                                          â”‚
â”‚   Prompt Template:                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ System: You are an IELTS test creator.           â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Task: Generate IELTS Listening Section 1 script  â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Requirements:                                      â”‚   â”‚
â”‚   â”‚ â€¢ Theme: Apartment rental inquiry                 â”‚   â”‚
â”‚   â”‚ â€¢ 2 speakers: Agent (female) and Client (male)   â”‚   â”‚
â”‚   â”‚ â€¢ Duration: ~3 minutes when spoken                â”‚   â”‚
â”‚   â”‚ â€¢ Natural conversation flow                       â”‚   â”‚
â”‚   â”‚ â€¢ Include 10 pieces of key information           â”‚   â”‚
â”‚   â”‚ â€¢ British English                                  â”‚   â”‚
â”‚   â”‚ â€¢ Appropriate for Band 6-7 difficulty            â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Key information to include:                       â”‚   â”‚
â”‚   â”‚ 1. Rental price                                   â”‚   â”‚
â”‚   â”‚ 2. Number of bedrooms                             â”‚   â”‚
â”‚   â”‚ 3. Available date                                 â”‚   â”‚
â”‚   â”‚ 4. Location/address                               â”‚   â”‚
â”‚   â”‚ 5. Deposit amount                                 â”‚   â”‚
â”‚   â”‚ 6. Lease duration                                 â”‚   â”‚
â”‚   â”‚ 7. Utilities included/excluded                    â”‚   â”‚
â”‚   â”‚ 8. Pet policy                                      â”‚   â”‚
â”‚   â”‚ 9. Parking availability                           â”‚   â”‚
â”‚   â”‚ 10. Contact information                           â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Return JSON:                                       â”‚   â”‚
â”‚   â”‚ {                                                  â”‚   â”‚
â”‚   â”‚   "script": "Full conversation...",               â”‚   â”‚
â”‚   â”‚   "key_information": [                            â”‚   â”‚
â”‚   â”‚     {                                              â”‚   â”‚
â”‚   â”‚       "item": "rental_price",                     â”‚   â”‚
â”‚   â”‚       "value": "850 pounds per month",           â”‚   â”‚
â”‚   â”‚       "timestamp": "00:45",                       â”‚   â”‚
â”‚   â”‚       "speaker": "Agent"                          â”‚   â”‚
â”‚   â”‚     },                                             â”‚   â”‚
â”‚   â”‚     // ... 9 more items                           â”‚   â”‚
â”‚   â”‚   ],                                               â”‚   â”‚
â”‚   â”‚   "speakers": [                                    â”‚   â”‚
â”‚   â”‚     {"name": "Agent", "gender": "female"},       â”‚   â”‚
â”‚   â”‚     {"name": "Client", "gender": "male"}         â”‚   â”‚
â”‚   â”‚   ]                                                â”‚   â”‚
â”‚   â”‚ }                                                  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â†“                                                          â”‚
â”‚   AI generates script (takes ~10-15 seconds)               â”‚
â”‚   â†“                                                          â”‚
â”‚   Validate AI response:                                     â”‚
â”‚   â€¢ Check JSON structure                                    â”‚
â”‚   â€¢ Verify 10 key information items                        â”‚
â”‚   â€¢ Check script length (500-700 words)                    â”‚
â”‚   â€¢ Ensure natural flow                                     â”‚
â”‚   â†“                                                          â”‚
â”‚   If validation fails:                                      â”‚
â”‚   â€¢ Retry with refined prompt                              â”‚
â”‚   â€¢ Max 3 retries                                           â”‚
â”‚   â€¢ Fallback to template-based generation                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: Generate Question Types                             â”‚
â”‚                                                              â”‚
â”‚ For each section (10 questions total):                     â”‚
â”‚   â†“                                                          â”‚
â”‚   Question type distribution (authentic IELTS pattern):    â”‚
â”‚   â€¢ Form completion: 3-4 questions                         â”‚
â”‚   â€¢ Multiple choice: 2-3 questions                         â”‚
â”‚   â€¢ Matching: 2 questions                                   â”‚
â”‚   â€¢ Sentence completion: 1-2 questions                     â”‚
â”‚                                                              â”‚
â”‚   Call AI Orchestration Service                            â”‚
â”‚   â†“                                                          â”‚
â”‚   Prompt Template:                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ System: Generate IELTS listening questions       â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Script: [full conversation script]                â”‚   â”‚
â”‚   â”‚ Key Information: [10 items with timestamps]      â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Generate 10 questions:                            â”‚   â”‚
â”‚   â”‚ â€¢ Questions 1-4: Form completion                  â”‚   â”‚
â”‚   â”‚ â€¢ Questions 5-7: Multiple choice                  â”‚   â”‚
â”‚   â”‚ â€¢ Questions 8-9: Matching                         â”‚   â”‚
â”‚   â”‚ â€¢ Question 10: Sentence completion                â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Rules:                                             â”‚   â”‚
â”‚   â”‚ â€¢ Questions follow audio chronology               â”‚   â”‚
â”‚   â”‚ â€¢ Answers are clearly in the audio                â”‚   â”‚
â”‚   â”‚ â€¢ Multiple choice has 3 options (A, B, C)        â”‚   â”‚
â”‚   â”‚ â€¢ Form completion: specific details               â”‚   â”‚
â”‚   â”‚ â€¢ No trick questions                              â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Return JSON with all questions and answers        â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â†“                                                          â”‚
â”‚   AI generates questions                                    â”‚
â”‚   â†“                                                          â”‚
â”‚   Example output:                                           â”‚
â”‚   {                                                          â”‚
â”‚     "questions": [                                          â”‚
â”‚       {                                                      â”‚
â”‚         "number": 1,                                        â”‚
â”‚         "type": "form_completion",                         â”‚
â”‚         "question_text": "Monthly rent: Â£____",            â”‚
â”‚         "correct_answer": "850",                           â”‚
â”‚         "accept_alternatives": ["850 pounds", "Â£850"]     â”‚
â”‚       },                                                     â”‚
â”‚       {                                                      â”‚
â”‚         "number": 5,                                        â”‚
â”‚         "type": "multiple_choice",                         â”‚
â”‚         "question_text": "When is the apartment           â”‚
â”‚                          available?",                      â”‚
â”‚         "options": {                                        â”‚
â”‚           "A": "Immediately",                              â”‚
â”‚           "B": "Next month",                               â”‚
â”‚           "C": "In two weeks"                              â”‚
â”‚         },                                                   â”‚
â”‚         "correct_answer": "C"                              â”‚
â”‚       },                                                     â”‚
â”‚       // ... 8 more questions                              â”‚
â”‚     ]                                                        â”‚
â”‚   }                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: Generate Audio Files                                â”‚
â”‚                                                              â”‚
â”‚ For each section script:                                    â”‚
â”‚   â†“                                                          â”‚
â”‚   Call Media Service                                        â”‚
â”‚   â†“                                                          â”‚
â”‚   Media Service uses ElevenLabs TTS API                    â”‚
â”‚   â†“                                                          â”‚
â”‚   API call configuration:                                   â”‚
â”‚   {                                                          â”‚
â”‚     "text": [full script],                                  â”‚
â”‚     "voice_id_1": "british_female_professional",           â”‚
â”‚     "voice_id_2": "british_male_casual",                   â”‚
â”‚     "model": "eleven_multilingual_v2",                     â”‚
â”‚     "output_format": "mp3_44100_128",                      â”‚
â”‚     "stability": 0.75,                                      â”‚
â”‚     "similarity_boost": 0.75                               â”‚
â”‚   }                                                          â”‚
â”‚   â†“                                                          â”‚
â”‚   ElevenLabs generates audio (~20-30 seconds)              â”‚
â”‚   â†“                                                          â”‚
â”‚   Download audio file                                       â”‚
â”‚   â†“                                                          â”‚
â”‚   Post-processing:                                          â”‚
â”‚   â€¢ Add silence gaps (2 sec between speakers)              â”‚
â”‚   â€¢ Normalize audio levels                                  â”‚
â”‚   â€¢ Add intro/outro ("Section 1, questions 1-10")         â”‚
â”‚   â€¢ Final duration: ~3-4 minutes                           â”‚
â”‚   â†“                                                          â”‚
â”‚   Upload to S3:                                             â”‚
â”‚   â€¢ Bucket: audio-files                                     â”‚
â”‚   â€¢ Path: /listening/{test_session_id}/section_1.mp3      â”‚
â”‚   â€¢ Set metadata: duration, size, checksum                 â”‚
â”‚   â€¢ Generate CloudFront CDN URL                            â”‚
â”‚   â†“                                                          â”‚
â”‚   Store audio URL in database                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 5: Repeat for Sections 2, 3, 4                        â”‚
â”‚ (Parallel processing for speed)                             â”‚
â”‚                                                              â”‚
â”‚ Section 2 Example: "Local library tour" (Monologue)       â”‚
â”‚ â€¢ Single speaker (librarian)                               â”‚
â”‚ â€¢ Duration: 3 minutes                                       â”‚
â”‚ â€¢ 10 questions (multiple choice + map labeling)           â”‚
â”‚                                                              â”‚
â”‚ Section 3 Example: "Group project discussion"             â”‚
â”‚ â€¢ 3-4 speakers (students + tutor)                          â”‚
â”‚ â€¢ Duration: 4 minutes                                       â”‚
â”‚ â€¢ 10 questions (matching + multiple choice)                â”‚
â”‚                                                              â”‚
â”‚ Section 4 Example: "Climate change lecture"               â”‚
â”‚ â€¢ Single speaker (professor)                               â”‚
â”‚ â€¢ Duration: 4 minutes                                       â”‚
â”‚ â€¢ 10 questions (note completion + sentence completion)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 6: Store Complete Listening Module in Database        â”‚
â”‚                                                              â”‚
â”‚ MongoDB document structure:                                 â”‚
â”‚ {                                                            â”‚
â”‚   "_id": ObjectId("..."),                                   â”‚
â”‚   "test_session_id": "uuid-...",                           â”‚
â”‚   "module": "listening",                                    â”‚
â”‚   "difficulty": "band_6_7",                                â”‚
â”‚   "test_type": "academic",                                  â”‚
â”‚   "sections": [                                             â”‚
â”‚     {                                                        â”‚
â”‚       "section_number": 1,                                  â”‚
â”‚       "theme": "Apartment rental inquiry",                 â”‚
â”‚       "audio_url": "https://cdn.../section_1.mp3",         â”‚
â”‚       "duration_seconds": 185,                             â”‚
â”‚       "script": "Full transcript...",                      â”‚
â”‚       "questions": [                                        â”‚
â”‚         {                                                    â”‚
â”‚           "number": 1,                                      â”‚
â”‚           "type": "form_completion",                       â”‚
â”‚           "question_text": "Monthly rent: Â£____",          â”‚
â”‚           "correct_answer": "850",                         â”‚
â”‚           "alternatives": ["850 pounds", "Â£850"],          â”‚
â”‚           "points": 1                                       â”‚
â”‚         },                                                   â”‚
â”‚         // ... 9 more questions                            â”‚
â”‚       ]                                                      â”‚
â”‚     },                                                       â”‚
â”‚     // ... sections 2, 3, 4                                â”‚
â”‚   ],                                                         â”‚
â”‚   "total_questions": 40,                                    â”‚
â”‚   "total_duration_seconds": 1800, // 30 minutes            â”‚
â”‚   "created_at": ISODate("..."),                            â”‚
â”‚   "created_by": "ai_generator_v2",                         â”‚
â”‚   "ai_cost": {                                              â”‚
â”‚     "script_generation": 0.045, // USD                     â”‚
â”‚     "audio_generation": 0.32, // USD                       â”‚
â”‚     "total": 0.365                                          â”‚
â”‚   }                                                          â”‚
â”‚ }                                                            â”‚
â”‚   â†“                                                          â”‚
â”‚ Also create index in PostgreSQL:                           â”‚
â”‚ â€¢ test_sessions table updated                              â”‚
â”‚ â€¢ listening_module_id linked                               â”‚
â”‚ â€¢ Status: 'listening_ready'                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    Listening module generation complete (30-45 seconds total)
    â†“
    Send WebSocket notification to frontend:
    "Listening module ready âœ“"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
READING MODULE GENERATION (Detailed Process)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Question Generator Service: Reading Module                   â”‚
â”‚                                                              â”‚
â”‚ Step 1: Determine Passage Topics                            â”‚
â”‚   IELTS Reading has 3 passages:                             â”‚
â”‚   â€¢ Passage 1: Easier (800-900 words)                      â”‚
â”‚   â€¢ Passage 2: Medium (900-950 words)                      â”‚
â”‚   â€¢ Passage 3: Harder (950-1000 words)                     â”‚
â”‚                                                              â”‚
â”‚   Topic selection criteria:                                 â”‚
â”‚   â€¢ Match test type (Academic vs General)                  â”‚
â”‚   â€¢ Match difficulty level                                  â”‚
â”‚   â€¢ Avoid recently used topics                             â”‚
â”‚   â€¢ Cover diverse subject areas                            â”‚
â”‚                                                              â”‚
â”‚   Academic topics pool:                                     â”‚
â”‚   â€¢ Science & Technology                                    â”‚
â”‚   â€¢ History & Archaeology                                   â”‚
â”‚   â€¢ Environment & Nature                                    â”‚
â”‚   â€¢ Psychology & Sociology                                  â”‚
â”‚   â€¢ Arts & Culture                                          â”‚
â”‚   â€¢ Medicine & Health                                       â”‚
â”‚                                                              â”‚
â”‚   General Training topics:                                  â”‚
â”‚   â€¢ Workplace scenarios                                     â”‚
â”‚   â€¢ Social situations                                       â”‚
â”‚   â€¢ General interest articles                              â”‚
â”‚   â€¢ Practical information                                   â”‚
â”‚                                                              â”‚
â”‚   Example topic selection:                                  â”‚
â”‚   Passage 1: "Urban Wildlife Adaptation"                   â”‚
â”‚   Passage 2: "The History of Timekeeping"                  â”‚
â”‚   Passage 3: "Neuroplasticity and Learning"                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: Generate Reading Passages                           â”‚
â”‚                                                              â”‚
â”‚ For each passage:                                           â”‚
â”‚   â†“                                                          â”‚
â”‚   Call AI Orchestration Service                            â”‚
â”‚   â†“                                                          â”‚
â”‚   AI Orchestration routes to: Claude Sonnet 4.5            â”‚
â”‚   (Best for complex, coherent text generation)             â”‚
â”‚   â†“                                                          â”‚
â”‚   Prompt Template for Passage 1:                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ System: You are an expert IELTS test creator.    â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Task: Write IELTS Academic Reading Passage 1     â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Topic: Urban Wildlife Adaptation                  â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Requirements:                                      â”‚   â”‚
â”‚   â”‚ â€¢ Word count: 850-900 words                       â”‚   â”‚
â”‚   â”‚ â€¢ Difficulty: Band 6-7 (easier passage)          â”‚   â”‚
â”‚   â”‚ â€¢ Academic style with formal tone                 â”‚   â”‚
â”‚   â”‚ â€¢ Include: introduction, body paragraphs,        â”‚   â”‚
â”‚   â”‚   conclusion                                       â”‚   â”‚
â”‚   â”‚ â€¢ Use varied vocabulary                           â”‚   â”‚
â”‚   â”‚ â€¢ Include specific examples, statistics, dates   â”‚   â”‚
â”‚   â”‚ â€¢ Paragraph structure: 4-5 paragraphs            â”‚   â”‚
â”‚   â”‚ â€¢ British English spelling                        â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Content should support 13 questions of types:    â”‚   â”‚
â”‚   â”‚ â€¢ True/False/Not Given (4 questions)             â”‚   â”‚
â”‚   â”‚ â€¢ Multiple Choice (4 questions)                   â”‚   â”‚
â”‚   â”‚ â€¢ Matching headings (3 questions)                 â”‚   â”‚
â”‚   â”‚ â€¢ Sentence completion (2 questions)               â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Include clear facts, opinions, and inferences    â”‚   â”‚
â”‚   â”‚ that can be used for questions.                   â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Return JSON:                                       â”‚   â”‚
â”‚   â”‚ {                                                  â”‚   â”‚
â”‚   â”‚   "title": "Passage title",                       â”‚   â”‚
â”‚   â”‚   "passage_text": "Full passage...",             â”‚   â”‚
â”‚   â”‚   "word_count": 875,                              â”‚   â”‚
â”‚   â”‚   "paragraphs": [                                  â”‚   â”‚
â”‚   â”‚     {                                              â”‚   â”‚
â”‚   â”‚       "letter": "A",                              â”‚   â”‚
â”‚   â”‚       "text": "Paragraph text...",                â”‚   â”‚
â”‚   â”‚       "main_idea": "Summary of paragraph"         â”‚   â”‚
â”‚   â”‚     },                                             â”‚   â”‚
â”‚   â”‚     // ... more paragraphs                        â”‚   â”‚
â”‚   â”‚   ],                                               â”‚   â”‚
â”‚   â”‚   "key_facts": [                                   â”‚   â”‚
â”‚   â”‚     "Fact 1 from passage",                        â”‚   â”‚
â”‚   â”‚     "Fact 2 from passage",                        â”‚   â”‚
â”‚   â”‚     // ... 10-15 key facts                        â”‚   â”‚
â”‚   â”‚   ]                                                â”‚   â”‚
â”‚   â”‚ }                                                  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â†“                                                          â”‚
â”‚   AI generates passage (~20-30 seconds)                    â”‚
â”‚   â†“                                                          â”‚
â”‚   Validate passage:                                         â”‚
â”‚   â€¢ Word count 850-900                                      â”‚
â”‚   â€¢ 4-5 clear paragraphs                                   â”‚
â”‚   â€¢ Academic tone check                                     â”‚
â”‚   â€¢ Readability score (Flesch Reading Ease)                â”‚
â”‚   â€¢ No inappropriate content                               â”‚
â”‚   â€¢ Contains sufficient factual information                â”‚
â”‚   â†“                                                          â”‚
â”‚   If validation fails:                                      â”‚
â”‚   â€¢ Regenerate with refined prompt                         â”‚
â”‚   â€¢ Max 2 retries per passage                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: Generate Questions for Each Passage                â”‚
â”‚                                                              â”‚
â”‚ For Passage 1 (13 questions):                              â”‚
â”‚   â†“                                                          â”‚
â”‚   Call AI Orchestration Service                            â”‚
â”‚   â†“                                                          â”‚
â”‚   Prompt Template:                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ System: Generate IELTS Reading questions         â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Passage: [full passage text with paragraphs]     â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Generate 13 questions following IELTS format:    â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Questions 1-4: True/False/Not Given              â”‚   â”‚
â”‚   â”‚ â€¢ Statement clearly stated in text = True        â”‚   â”‚
â”‚   â”‚ â€¢ Statement contradicts text = False             â”‚   â”‚
â”‚   â”‚ â€¢ No information given = Not Given               â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Questions 5-8: Multiple Choice                    â”‚   â”‚
â”‚   â”‚ â€¢ 3 options (A, B, C)                            â”‚   â”‚
â”‚   â”‚ â€¢ One clearly correct answer                     â”‚   â”‚
â”‚   â”‚ â€¢ Distractors must be plausible                  â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Questions 9-11: Matching Headings                â”‚   â”‚
â”‚   â”‚ â€¢ Match paragraphs to heading options            â”‚   â”‚
â”‚   â”‚ â€¢ More headings than paragraphs                  â”‚   â”‚
â”‚   â”‚ â€¢ Headings capture main idea                     â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Questions 12-13: Sentence Completion             â”‚   â”‚
â”‚   â”‚ â€¢ Complete sentence with words from passage      â”‚   â”‚
â”‚   â”‚ â€¢ Word limit specified (e.g., "NO MORE THAN      â”‚   â”‚
â”‚   â”‚   TWO WORDS")                                     â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Return JSON with all questions, answers, and     â”‚   â”‚
â”‚   â”‚ explanations                                      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â†“                                                          â”‚
â”‚   Example output:                                           â”‚
â”‚   {                                                          â”‚
â”‚     "questions": [                                          â”‚
â”‚       {                                                      â”‚
â”‚         "number": 1,                                        â”‚
â”‚         "type": "true_false_not_given",                    â”‚
â”‚         "statement": "Urban foxes have completely          â”‚
â”‚                      abandoned their natural diet.",       â”‚
â”‚         "correct_answer": "FALSE",                         â”‚
â”‚         "explanation": "Paragraph B states that urban      â”‚
â”‚                        foxes supplement their diet but     â”‚
â”‚                        still hunt small prey.",            â”‚
â”‚         "referenced_paragraph": "B"                        â”‚
â”‚       },                                                     â”‚
â”‚       {                                                      â”‚
â”‚         "number": 5,                                        â”‚
â”‚         "type": "multiple_choice",                         â”‚
â”‚         "question": "According to the passage, urban       â”‚
â”‚                     wildlife populations are increasing    â”‚
â”‚                     because:",                             â”‚
â”‚         "options": {                                        â”‚
â”‚           "A": "humans provide intentional food           â”‚
â”‚                sources",                                   â”‚
â”‚           "B": "cities offer more shelter and fewer       â”‚
â”‚                predators",                                 â”‚
â”‚           "C": "climate change has made cities warmer"    â”‚
â”‚         },                                                   â”‚
â”‚         "correct_answer": "B",                             â”‚
â”‚         "explanation": "Paragraph C explicitly mentions    â”‚
â”‚                        abundant shelter and lack of        â”‚
â”‚                        predators",                         â”‚
â”‚         "referenced_paragraph": "C"                        â”‚
â”‚       },                                                     â”‚
â”‚       {                                                      â”‚
â”‚         "number": 9,                                        â”‚
â”‚         "type": "matching_headings",                       â”‚
â”‚         "instructions": "Match each paragraph with its     â”‚
â”‚                         heading",                          â”‚
â”‚         "paragraphs_to_match": ["A", "B", "D"],           â”‚
â”‚         "heading_options": {                               â”‚
â”‚           "i": "The diet of urban wildlife",              â”‚
â”‚           "ii": "Historical perspective on urbanization", â”‚
â”‚           "iii": "Advantages of city living for animals", â”‚
â”‚           "iv": "Human responses to wildlife presence",   â”‚
â”‚           "v": "Nocturnal behavior patterns",             â”‚
â”‚           "vi": "Introduction to urban ecosystems"        â”‚
â”‚         },                                                   â”‚
â”‚         "correct_answers": {                               â”‚
â”‚           "A": "vi",                                       â”‚
â”‚           "B": "i",                                        â”‚
â”‚           "D": "iii"                                       â”‚
â”‚         },                                                   â”‚
â”‚         "explanation": "..."                               â”‚
â”‚       },                                                     â”‚
â”‚       {                                                      â”‚
â”‚         "number": 12,                                       â”‚
â”‚         "type": "sentence_completion",                     â”‚
â”‚         "sentence": "Urban foxes have learned to ____     â”‚
â”‚                     and ____ to survive in cities.",      â”‚
â”‚         "word_limit": "NO MORE THAN TWO WORDS",           â”‚
â”‚         "correct_answer": "adapt quickly / scavenge       â”‚
â”‚                           food",                           â”‚
â”‚         "accept_alternatives": [                           â”‚
â”‚           "quickly adapt / find food",                     â”‚
â”‚           "adapt / scavenge"                               â”‚
â”‚         ],                                                   â”‚
â”‚         "referenced_paragraph": "E"                        â”‚
â”‚       },                                                     â”‚
â”‚       // ... remaining questions                           â”‚
â”‚     ]                                                        â”‚
â”‚   }                                                          â”‚
â”‚   â†“                                                          â”‚
â”‚   Validation:                                               â”‚
â”‚   â€¢ Verify 13 questions total                              â”‚
â”‚   â€¢ Check question type distribution                       â”‚
â”‚   â€¢ Ensure answers are clearly in passage                 â”‚
â”‚   â€¢ No ambiguous questions                                 â”‚
â”‚   â€¢ Check difficulty appropriate for passage               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: Repeat for Passages 2 and 3                        â”‚
â”‚ (Parallel processing)                                        â”‚
â”‚                                                              â”‚
â”‚ Passage 2: Medium difficulty                                â”‚
â”‚ â€¢ 900-950 words                                             â”‚
â”‚ â€¢ Band 6.5-7.5 complexity                                   â”‚
â”‚ â€¢ 13 questions                                              â”‚
â”‚ â€¢ Mix of question types                                     â”‚
â”‚                                                              â”‚
â”‚ Passage 3: Harder difficulty                                â”‚
â”‚ â€¢ 950-1000 words                                            â”‚
â”‚ â€¢ Band 7.5-8.5 complexity                                   â”‚
â”‚ â€¢ 14 questions                                              â”‚
â”‚ â€¢ More complex question types                              â”‚
â”‚ â€¢ Abstract concepts                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 5: Store Complete Reading Module in Database          â”‚
â”‚                                                              â”‚
â”‚ MongoDB document:                                            â”‚
â”‚ {                                                            â”‚
â”‚   "_id": ObjectId("..."),                                   â”‚
â”‚   "test_session_id": "uuid-...",                           â”‚
â”‚   "module": "reading",                                      â”‚
â”‚   "difficulty": "band_6_7",                                â”‚
â”‚   "test_type": "academic",                                  â”‚
â”‚   "passages": [                                             â”‚
â”‚     {                                                        â”‚
â”‚       "passage_number": 1,                                  â”‚
â”‚       "title": "Urban Wildlife Adaptation",                â”‚
â”‚       "passage_text": "Full text with paragraphs...",     â”‚
â”‚       "word_count": 875,                                    â”‚
â”‚       "difficulty_level": "easier",                        â”‚
â”‚       "paragraphs": [                                       â”‚
â”‚         {"letter": "A", "text": "...", "main_idea": "..."} â”‚
â”‚         // ... more paragraphs                             â”‚
â”‚       ],                                                     â”‚
â”‚       "questions": [                                        â”‚
â”‚         // ... 13 questions with answers                   â”‚
â”‚       ]                                                      â”‚
â”‚     },                                                       â”‚
â”‚     // ... passages 2 and 3                                â”‚
â”‚   ],                                                         â”‚
â”‚   "total_questions": 40,                                    â”‚
â”‚   "total_word_count": 2700,                                â”‚
â”‚   "estimated_time_minutes": 60,                            â”‚
â”‚   "created_at": ISODate("..."),                            â”‚
â”‚   "ai_cost": {                                              â”‚
â”‚     "passage_generation": 0.15,                            â”‚
â”‚     "question_generation": 0.08,                           â”‚
â”‚     "total": 0.23                                           â”‚
â”‚   }                                                          â”‚
â”‚ }                                                            â”‚
â”‚   â†“                                                          â”‚
â”‚ Update PostgreSQL:                                          â”‚
â”‚ â€¢ test_sessions table                                       â”‚
â”‚ â€¢ reading_module_id linked                                 â”‚
â”‚ â€¢ Status: 'reading_ready'                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    Reading module generation complete (45-60 seconds total)
    â†“
    Send WebSocket notification: "Reading module ready âœ“"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
WRITING MODULE GENERATION (Detailed Process)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Question Generator Service: Writing Module                   â”‚
â”‚                                                              â”‚
â”‚ IELTS Writing has 2 tasks:                                  â”‚
â”‚ â€¢ Task 1: 150+ words, 20 minutes                           â”‚
â”‚   - Academic: Describe chart/graph/diagram                 â”‚
â”‚   - General: Write a letter                                â”‚
â”‚ â€¢ Task 2: 250+ words, 40 minutes                           â”‚
â”‚   - Essay on given topic                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: Generate Writing Task 1                             â”‚
â”‚                                                              â”‚
â”‚ If test_type == "academic":                                 â”‚
â”‚   â†“                                                          â”‚
â”‚   Generate chart/graph/diagram task                        â”‚
â”‚   â†“                                                          â”‚
â”‚   Sub-step 1a: Decide visual type                          â”‚
â”‚   â€¢ Bar chart (common)                                      â”‚
â”‚   â€¢ Line graph (trends over time)                          â”‚
â”‚   â€¢ Pie chart (proportions)                                â”‚
â”‚   â€¢ Table (data comparison)                                â”‚
â”‚   â€¢ Process diagram                                         â”‚
â”‚   â€¢ Map (geographical changes)                             â”‚
â”‚   â†“                                                          â”‚
â”‚   Randomly select OR based on user's weak areas            â”‚
â”‚   Example: Bar chart selected                              â”‚
â”‚   â†“                                                          â”‚
â”‚   Sub-step 1b: Generate chart data                         â”‚
â”‚   â†“                                                          â”‚
â”‚   Call AI Orchestration Service                            â”‚
â”‚   Route to: GPT-4o                                          â”‚
â”‚   â†“                                                          â”‚
â”‚   Prompt:                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ System: Generate IELTS Writing Task 1 data       â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Create realistic data for a bar chart showing:   â”‚   â”‚
â”‚   â”‚ "The percentage of households owning different   â”‚   â”‚
â”‚   â”‚  types of vehicles in three countries in 2020"   â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Requirements:                                      â”‚   â”‚
â”‚   â”‚ â€¢ 3 countries                                      â”‚   â”‚
â”‚   â”‚ â€¢ 4 vehicle types                                  â”‚   â”‚
â”‚   â”‚ â€¢ Realistic percentages                           â”‚   â”‚
â”‚   â”‚ â€¢ Clear trends/comparisons                        â”‚   â”‚
â”‚   â”‚ â€¢ Data should allow meaningful analysis           â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Return JSON:                                       â”‚   â”‚
â”‚   â”‚ {                                                  â”‚   â”‚
â”‚   â”‚   "chart_type": "bar_chart",                      â”‚   â”‚
â”‚   â”‚   "title": "Household Vehicle Ownership...",      â”‚   â”‚
â”‚   â”‚   "data": {                                        â”‚   â”‚
â”‚   â”‚     "categories": ["Cars", "Motorcycles",        â”‚   â”‚
â”‚   â”‚                   "Bicycles", "Electric cars"],   â”‚   â”‚
â”‚   â”‚     "countries": [                                 â”‚   â”‚
â”‚   â”‚       {                                            â”‚   â”‚
â”‚   â”‚         "name": "USA",                            â”‚   â”‚
â”‚   â”‚         "values": [88, 12, 15, 8]                â”‚   â”‚
â”‚   â”‚       },                                           â”‚   â”‚
â”‚   â”‚       // ... 2 more countries                     â”‚   â”‚
â”‚   â”‚     ]                                              â”‚   â”‚
â”‚   â”‚   },                                               â”‚   â”‚
â”‚   â”‚   "task_description": "The bar chart shows..."   â”‚   â”‚
â”‚   â”‚ }                                                  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â†“                                                          â”‚
â”‚   AI generates data                                         â”‚
â”‚   â†“                                                          â”‚
â”‚   Sub-step 1c: Create visual chart                         â”‚
â”‚   â†“                                                          â”‚
â”‚   Call Media Service                                        â”‚
â”‚   â†“                                                          â”‚
â”‚   Media Service uses:                                       â”‚
â”‚   â€¢ Chart.js (server-side rendering) OR                    â”‚
â”‚   â€¢ Stable Diffusion API (for diagrams/maps)               â”‚
â”‚   â†“                                                          â”‚
â”‚   For Chart.js approach:                                    â”‚
â”‚   â€¢ Node.js script with Chart.js                           â”‚
â”‚   â€¢ Render chart to PNG/SVG                                â”‚
â”‚   â€¢ High resolution (1200x800px)                           â”‚
â”‚   â€¢ Professional styling                                    â”‚
â”‚   â€¢ Clear labels and legend                                â”‚
â”‚   â†“                                                          â”‚
â”‚   Upload image to S3:                                       â”‚
â”‚   â€¢ Path: /writing/{test_session_id}/task1_chart.png      â”‚
â”‚   â€¢ Generate CDN URL                                        â”‚
â”‚                                                              â”‚
â”‚ If test_type == "general":                                  â”‚
â”‚   â†“                                                          â”‚
â”‚   Generate letter writing task                             â”‚
â”‚   â†“                                                          â”‚
â”‚   Call AI Orchestration                                     â”‚
â”‚   Route to: Claude Sonnet 4.5                              â”‚
â”‚   â†“                                                          â”‚
â”‚   Prompt:                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Generate IELTS General Training Writing Task 1   â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Letter type: [Formal/Semi-formal/Informal]       â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Create a realistic scenario where the test-taker â”‚   â”‚
â”‚   â”‚ needs to write a letter.                          â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Include:                                           â”‚   â”‚
â”‚   â”‚ â€¢ Clear situation description                     â”‚   â”‚
â”‚   â”‚ â€¢ 3 bullet points of what to address             â”‚   â”‚
â”‚   â”‚ â€¢ Appropriate tone requirement                    â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Example scenarios:                                 â”‚   â”‚
â”‚   â”‚ â€¢ Complaining to a company                        â”‚   â”‚
â”‚   â”‚ â€¢ Requesting information                          â”‚   â”‚
â”‚   â”‚ â€¢ Thanking someone                                â”‚   â”‚
â”‚   â”‚ â€¢ Inviting someone                                â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â†“                                                          â”‚
â”‚   Example output:                                           â”‚
â”‚   "You recently bought a laptop online but it arrived      â”‚
â”‚   damaged. Write a letter to the company.                  â”‚
â”‚   In your letter:                                           â”‚
â”‚   â€¢ Explain what you ordered and when                      â”‚
â”‚   â€¢ Describe the damage                                    â”‚
â”‚   â€¢ Say what you want the company to do"                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: Generate Writing Task 2                             â”‚
â”‚                                                              â”‚
â”‚ Call AI Orchestration Service                              â”‚
â”‚ Route to: Claude Sonnet 4.5 OR GPT-4o                      â”‚
â”‚   â†“                                                          â”‚
â”‚   Prompt Template:                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ System: Generate IELTS Writing Task 2 question   â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Essay type: [Randomly select OR based on weak    â”‚   â”‚
â”‚   â”‚            areas]                                  â”‚   â”‚
â”‚   â”‚ â€¢ Opinion (Agree/Disagree)                        â”‚   â”‚
â”‚   â”‚ â€¢ Discussion (Discuss both views)                 â”‚   â”‚
â”‚   â”‚ â€¢ Advantages & Disadvantages                      â”‚   â”‚
â”‚   â”‚ â€¢ Problem & Solution                              â”‚   â”‚
â”‚   â”‚ â€¢ Two-part question                               â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Topic categories to choose from:                  â”‚   â”‚
â”‚   â”‚ â€¢ Education                                        â”‚   â”‚
â”‚   â”‚ â€¢ Technology                                       â”‚   â”‚
â”‚   â”‚ â€¢ Environment                                      â”‚   â”‚
â”‚   â”‚ â€¢ Society & Culture                               â”‚   â”‚
â”‚   â”‚ â€¢ Health & Lifestyle                              â”‚   â”‚
â”‚   â”‚ â€¢ Government & Politics                           â”‚   â”‚
â”‚   â”‚ â€¢ Work & Employment                               â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Difficulty: Band 6-7                              â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Requirements:                                      â”‚   â”‚
â”‚   â”‚ â€¢ Clear, unambiguous question                     â”‚   â”‚
â”‚   â”‚ â€¢ Relevant to modern society                      â”‚   â”‚
â”‚   â”‚ â€¢ Allows for balanced argumentation               â”‚   â”‚
â”‚   â”‚ â€¢ Not too specialized/technical                   â”‚   â”‚
â”‚   â”‚ â€¢ Authentic IELTS style                           â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Return JSON:                                       â”‚   â”‚
â”‚   â”‚ {                                                  â”‚   â”‚
â”‚   â”‚   "essay_type": "opinion",```json
â”‚   â”‚   "topic_category": "technology",                 â”‚   â”‚
â”‚   â”‚   "question": "Some people believe that social   â”‚   â”‚
â”‚   â”‚               media has made communication       â”‚   â”‚
â”‚   â”‚               better, while others think it has  â”‚   â”‚
â”‚   â”‚               made it worse. Discuss both views  â”‚   â”‚
â”‚   â”‚               and give your own opinion.",        â”‚   â”‚
â”‚   â”‚   "instructions": "Give reasons for your answer  â”‚   â”‚
â”‚   â”‚                   and include any relevant       â”‚   â”‚
â”‚   â”‚                   examples from your own         â”‚   â”‚
â”‚   â”‚                   knowledge or experience.",      â”‚   â”‚
â”‚   â”‚   "word_requirement": 250,                        â”‚   â”‚
â”‚   â”‚   "time_limit_minutes": 40,                      â”‚   â”‚
â”‚   â”‚   "sample_band_9_answer": "Full essay...",      â”‚   â”‚
â”‚   â”‚   "key_points_to_cover": [                       â”‚   â”‚
â”‚   â”‚     "Both positive and negative aspects",        â”‚   â”‚
â”‚   â”‚     "Personal opinion clearly stated",           â”‚   â”‚
â”‚   â”‚     "Examples to support arguments",             â”‚   â”‚
â”‚   â”‚     "Conclusion summarizing views"               â”‚   â”‚
â”‚   â”‚   ]                                               â”‚   â”‚
â”‚   â”‚ }                                                  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â†“                                                          â”‚
â”‚   AI generates essay question                               â”‚
â”‚   â†“                                                          â”‚
â”‚   Validation:                                               â”‚
â”‚   â€¢ Question is clear and balanced                         â”‚
â”‚   â€¢ Appropriate difficulty level                           â”‚
â”‚   â€¢ Relevant and current topic                             â”‚
â”‚   â€¢ Allows for 250+ word response                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: Store Complete Writing Module in Database          â”‚
â”‚                                                              â”‚
â”‚ MongoDB document:                                            â”‚
â”‚ {                                                            â”‚
â”‚   "_id": ObjectId("..."),                                   â”‚
â”‚   "test_session_id": "uuid-...",                           â”‚
â”‚   "module": "writing",                                      â”‚
â”‚   "difficulty": "band_6_7",                                â”‚
â”‚   "test_type": "academic",                                  â”‚
â”‚   "tasks": [                                                â”‚
â”‚     {                                                        â”‚
â”‚       "task_number": 1,                                     â”‚
â”‚       "task_type": "chart_description",                    â”‚
â”‚       "chart_url": "https://cdn.../task1_chart.png",       â”‚
â”‚       "chart_data": {                                       â”‚
â”‚         // Original data for reference                     â”‚
â”‚       },                                                     â”‚
â”‚       "task_description": "The bar chart shows...",        â”‚
â”‚       "word_requirement": 150,                             â”‚
â”‚       "time_limit_minutes": 20,                            â”‚
â”‚       "band_9_sample": "Sample answer text...",            â”‚
â”‚       "assessment_criteria": [                             â”‚
â”‚         "Task Achievement",                                â”‚
â”‚         "Coherence and Cohesion",                          â”‚
â”‚         "Lexical Resource",                                â”‚
â”‚         "Grammatical Range and Accuracy"                   â”‚
â”‚       ]                                                     â”‚
â”‚     },                                                       â”‚
â”‚     {                                                        â”‚
â”‚       "task_number": 2,                                     â”‚
â”‚       "task_type": "opinion_essay",                        â”‚
â”‚       "question": "Some people believe that...",           â”‚
â”‚       "instructions": "Give reasons for your answer...",   â”‚
â”‚       "word_requirement": 250,                             â”‚
â”‚       "time_limit_minutes": 40,                            â”‚
â”‚       "band_9_sample": "Sample essay...",                  â”‚
â”‚       "key_points_to_cover": [...],                        â”‚
â”‚       "assessment_criteria": [...]                         â”‚
â”‚     }                                                        â”‚
â”‚   ],                                                         â”‚
â”‚   "total_time_minutes": 60,                                â”‚
â”‚   "created_at": ISODate("..."),                            â”‚
â”‚   "ai_cost": {                                              â”‚
â”‚     "task1_generation": 0.05,                              â”‚
â”‚     "task2_generation": 0.08,                              â”‚
â”‚     "chart_creation": 0.02,                                â”‚
â”‚     "total": 0.15                                           â”‚
â”‚   }                                                          â”‚
â”‚ }                                                            â”‚
â”‚   â†“                                                          â”‚
â”‚ Update PostgreSQL:                                          â”‚
â”‚ â€¢ Status: 'writing_ready'                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    Writing module generation complete (20-30 seconds)
    â†“
    Send WebSocket notification: "Writing module ready âœ“"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SPEAKING MODULE GENERATION (Detailed Process)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Question Generator Service: Speaking Module                 â”‚
â”‚                                                              â”‚
â”‚ IELTS Speaking has 3 parts:                                 â”‚
â”‚ â€¢ Part 1: Introduction & Interview (4-5 min, 5-6 Q)       â”‚
â”‚ â€¢ Part 2: Long Turn with cue card (3-4 min)               â”‚
â”‚ â€¢ Part 3: Discussion (4-5 min, 4-5 Q)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: Generate Speaking Part 1 Questions                  â”‚
â”‚                                                              â”‚
â”‚ Call AI Orchestration Service                              â”‚
â”‚ Route to: GPT-4o                                            â”‚
â”‚   â†“                                                          â”‚
â”‚   Prompt Template:                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ System: Generate IELTS Speaking Part 1 questions â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Part 1 covers familiar topics:                   â”‚   â”‚
â”‚   â”‚ â€¢ Home/Accommodation                              â”‚   â”‚
â”‚   â”‚ â€¢ Family                                           â”‚   â”‚
â”‚   â”‚ â€¢ Work/Study                                       â”‚   â”‚
â”‚   â”‚ â€¢ Hobbies/Interests                               â”‚   â”‚
â”‚   â”‚ â€¢ Daily routines                                   â”‚   â”‚
â”‚   â”‚ â€¢ Food                                             â”‚   â”‚
â”‚   â”‚ â€¢ Technology                                       â”‚   â”‚
â”‚   â”‚ â€¢ Travel                                           â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Generate 2 topics with 3 questions each          â”‚   â”‚
â”‚   â”‚ Total: 6 questions                                â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Requirements:                                      â”‚   â”‚
â”‚   â”‚ â€¢ Personal questions (about the candidate)       â”‚   â”‚
â”‚   â”‚ â€¢ Simple, direct questions                        â”‚   â”‚
â”‚   â”‚ â€¢ Present tense focus                             â”‚   â”‚
â”‚   â”‚ â€¢ Allow 20-30 second answers                      â”‚   â”‚
â”‚   â”‚ â€¢ Warm-up style                                   â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Difficulty: Band 6-7                              â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Return JSON with questions and sample answers    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â†“                                                          â”‚
â”‚   Example output:                                           â”‚
â”‚   {                                                          â”‚
â”‚     "part": 1,                                              â”‚
â”‚     "duration_minutes": "4-5",                             â”‚
â”‚     "topics": [                                             â”‚
â”‚       {                                                      â”‚
â”‚         "topic": "Your Hometown",                          â”‚
â”‚         "questions": [                                      â”‚
â”‚           {                                                  â”‚
â”‚             "number": 1,                                    â”‚
â”‚             "question": "Where is your hometown?",         â”‚
â”‚             "expected_answer_length": "20-30 seconds",     â”‚
â”‚             "sample_band_7_answer": "I'm from Dhaka,       â”‚
â”‚                                     the capital city of    â”‚
â”‚                                     Bangladesh. It's a     â”‚
â”‚                                     very busy and crowded  â”‚
â”‚                                     place with over 20     â”‚
â”‚                                     million people...",    â”‚
â”‚             "assessment_focus": ["fluency", "vocabulary"]  â”‚
â”‚           },                                                 â”‚
â”‚           {                                                  â”‚
â”‚             "number": 2,                                    â”‚
â”‚             "question": "What do you like most about       â”‚
â”‚                         your hometown?",                   â”‚
â”‚             "expected_answer_length": "30-40 seconds",     â”‚
â”‚             "sample_band_7_answer": "What I appreciate     â”‚
â”‚                                     most is the vibrant    â”‚
â”‚                                     culture and the sense  â”‚
â”‚                                     of community...",      â”‚
â”‚             "assessment_focus": ["coherence", "grammar"]   â”‚
â”‚           },                                                 â”‚
â”‚           {                                                  â”‚
â”‚             "number": 3,                                    â”‚
â”‚             "question": "Do you think your hometown        â”‚
â”‚                         has changed much in recent         â”‚
â”‚                         years?",                           â”‚
â”‚             "expected_answer_length": "30-40 seconds",     â”‚
â”‚             "sample_band_7_answer": "Yes, definitely...",  â”‚
â”‚             "assessment_focus": ["grammar", "vocabulary"]  â”‚
â”‚           }                                                  â”‚
â”‚         ]                                                    â”‚
â”‚       },                                                     â”‚
â”‚       {                                                      â”‚
â”‚         "topic": "Your Daily Routine",                     â”‚
â”‚         "questions": [                                      â”‚
â”‚           {                                                  â”‚
â”‚             "number": 4,                                    â”‚
â”‚             "question": "What do you usually do in the     â”‚
â”‚                         morning?",                         â”‚
â”‚             "expected_answer_length": "25-35 seconds",     â”‚
â”‚             "sample_band_7_answer": "My mornings are       â”‚
â”‚                                     quite routine...",      â”‚
â”‚             "assessment_focus": ["fluency", "coherence"]   â”‚
â”‚           },                                                 â”‚
â”‚           // ... 2 more questions                          â”‚
â”‚         ]                                                    â”‚
â”‚       }                                                      â”‚
â”‚     ]                                                        â”‚
â”‚   }                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: Generate Speaking Part 2 (Cue Card)                â”‚
â”‚                                                              â”‚
â”‚ Call AI Orchestration Service                              â”‚
â”‚   â†“                                                          â”‚
â”‚   Prompt Template:                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ System: Generate IELTS Speaking Part 2 cue card  â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Part 2 topic categories:                         â”‚   â”‚
â”‚   â”‚ â€¢ Describe a person                               â”‚   â”‚
â”‚   â”‚ â€¢ Describe a place                                â”‚   â”‚
â”‚   â”‚ â€¢ Describe an event/experience                    â”‚   â”‚
â”‚   â”‚ â€¢ Describe an object                              â”‚   â”‚
â”‚   â”‚ â€¢ Describe an activity                            â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Requirements:                                      â”‚   â”‚
â”‚   â”‚ â€¢ Clear topic with 3-4 bullet points             â”‚   â”‚
â”‚   â”‚ â€¢ Allows 1-2 minute monologue                     â”‚   â”‚
â”‚   â”‚ â€¢ Personal experience-based                       â”‚   â”‚
â”‚   â”‚ â€¢ Not too specialized                             â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Difficulty: Band 6-7                              â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Include:                                           â”‚   â”‚
â”‚   â”‚ â€¢ Preparation time: 1 minute                      â”‚   â”‚
â”‚   â”‚ â€¢ Speaking time: 1-2 minutes                      â”‚   â”‚
â”‚   â”‚ â€¢ Bullet points to cover                          â”‚   â”‚
â”‚   â”‚ â€¢ Sample band 7 and band 9 answers               â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â†“                                                          â”‚
â”‚   Example output:                                           â”‚
â”‚   {                                                          â”‚
â”‚     "part": 2,                                              â”‚
â”‚     "preparation_time_seconds": 60,                        â”‚
â”‚     "speaking_time_seconds": "60-120",                     â”‚
â”‚     "cue_card": {                                           â”‚
â”‚       "topic": "Describe a book you recently read",        â”‚
â”‚       "bullet_points": [                                    â”‚
â”‚         "What the book was about",                         â”‚
â”‚         "Why you chose to read it",                        â”‚
â”‚         "What you learned from it",                        â”‚
â”‚         "And explain whether you would recommend it        â”‚
â”‚          to others"                                         â”‚
â”‚       ],                                                     â”‚
â”‚       "notes_guidance": "You can make notes during         â”‚
â”‚                         preparation time",                 â”‚
â”‚       "sample_band_7_answer": "I'd like to talk about a   â”‚
â”‚                               book I finished recently...  â”‚
â”‚                               [150-200 words]",            â”‚
â”‚       "sample_band_9_answer": "The book I'd like to       â”‚
â”‚                               describe is... [200-250      â”‚
â”‚                               words with advanced vocab    â”‚
â”‚                               and structures]",            â”‚
â”‚       "assessment_focus": [                                â”‚
â”‚         "Fluency - speaking continuously for 2 minutes",   â”‚
â”‚         "Coherence - logical organization of ideas",       â”‚
â”‚         "Vocabulary - topic-specific words",               â”‚
â”‚         "Grammar - variety of structures"                  â”‚
â”‚       ]                                                     â”‚
â”‚     },                                                       â”‚
â”‚     "follow_up_questions": [                               â”‚
â”‚       "Do you usually take long to finish a book?",        â”‚
â”‚       "What kind of books are popular in your country?"    â”‚
â”‚     ]                                                        â”‚
â”‚   }                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: Generate Speaking Part 3 Questions                  â”‚
â”‚                                                              â”‚
â”‚ Part 3 questions are thematically linked to Part 2         â”‚
â”‚   â†“                                                          â”‚
â”‚   Call AI Orchestration Service                            â”‚
â”‚   â†“                                                          â”‚
â”‚   Prompt Template:                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ System: Generate IELTS Speaking Part 3 questions â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Part 2 topic was: "A book you recently read"     â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Part 3 explores abstract/broader aspects:        â”‚   â”‚
â”‚   â”‚ â€¢ Reading habits in society                       â”‚   â”‚
â”‚   â”‚ â€¢ Technology's impact on reading                  â”‚   â”‚
â”‚   â”‚ â€¢ Education and literacy                          â”‚   â”‚
â”‚   â”‚ â€¢ Future of books                                 â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Generate 4-5 questions that:                      â”‚   â”‚
â”‚   â”‚ â€¢ Are more abstract/analytical                    â”‚   â”‚
â”‚   â”‚ â€¢ Require justification and examples              â”‚   â”‚
â”‚   â”‚ â€¢ Test critical thinking                          â”‚   â”‚
â”‚   â”‚ â€¢ Allow 40-60 second answers                      â”‚   â”‚
â”‚   â”‚ â€¢ Progress from simpler to more complex           â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Difficulty: Band 7-8                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â†“                                                          â”‚
â”‚   Example output:                                           â”‚
â”‚   {                                                          â”‚
â”‚     "part": 3,                                              â”‚
â”‚     "duration_minutes": "4-5",                             â”‚
â”‚     "theme": "Reading and Literature",                     â”‚
â”‚     "questions": [                                          â”‚
â”‚       {                                                      â”‚
â”‚         "number": 1,                                        â”‚
â”‚         "complexity": "medium",                            â”‚
â”‚         "question": "How have reading habits changed       â”‚
â”‚                     with the rise of digital               â”‚
â”‚                     technology?",                          â”‚
â”‚         "expected_answer_length": "40-60 seconds",         â”‚
â”‚         "sample_band_7_answer": "I think digital           â”‚
â”‚                                 technology has            â”‚
â”‚                                 significantly changed...   â”‚
â”‚                                 [80-100 words]",           â”‚
â”‚         "sample_band_9_answer": "The advent of digital     â”‚
â”‚                                 technology has            â”‚
â”‚                                 fundamentally             â”‚
â”‚                                 transformed... [100-120   â”‚
â”‚                                 words with sophisticated  â”‚
â”‚                                 arguments]",              â”‚
â”‚         "key_points_to_address": [                         â”‚
â”‚           "Shift from print to digital",                   â”‚
â”‚           "Changes in attention span",                     â”‚
â”‚           "Accessibility improvements",                    â”‚
â”‚           "Impact on comprehension"                        â”‚
â”‚         ]                                                   â”‚
â”‚       },                                                     â”‚
â”‚       {                                                      â”‚
â”‚         "number": 2,                                        â”‚
â”‚         "complexity": "medium",                            â”‚
â”‚         "question": "Do you think children today read      â”‚
â”‚                     less than previous generations?",     â”‚
â”‚         "expected_answer_length": "50-70 seconds",         â”‚
â”‚         "sample_answers": {...},                           â”‚
â”‚         "key_points_to_address": [...]                     â”‚
â”‚       },                                                     â”‚
â”‚       {                                                      â”‚
â”‚         "number": 3,                                        â”‚
â”‚         "complexity": "high",                              â”‚
â”‚         "question": "What role should governments play     â”‚
â”‚                     in promoting literacy and reading?",  â”‚
â”‚         "expected_answer_length": "60-80 seconds",         â”‚
â”‚         "sample_answers": {...},                           â”‚
â”‚         "key_points_to_address": [                         â”‚
â”‚           "Government responsibility",                     â”‚
â”‚           "Public libraries and access",                   â”‚
â”‚           "Education policy",                              â”‚
â”‚           "Balance with other priorities"                  â”‚
â”‚         ]                                                   â”‚
â”‚       },                                                     â”‚
â”‚       {                                                      â”‚
â”‚         "number": 4,                                        â”‚
â”‚         "complexity": "high",                              â”‚
â”‚         "question": "In what ways might artificial         â”‚
â”‚                     intelligence change how we interact    â”‚
â”‚                     with books and literature in the       â”‚
â”‚                     future?",                              â”‚
â”‚         "expected_answer_length": "60-90 seconds",         â”‚
â”‚         "sample_answers": {...},                           â”‚
â”‚         "key_points_to_address": [                         â”‚
â”‚           "AI-generated content",                          â”‚
â”‚           "Personalized reading experiences",              â”‚
â”‚           "Translation and accessibility",                 â”‚
â”‚           "Potential concerns"                             â”‚
â”‚         ]                                                   â”‚
â”‚       }                                                      â”‚
â”‚     ]                                                        â”‚
â”‚   }                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: Optional - Generate Audio Examples                  â”‚
â”‚                                                              â”‚
â”‚ For premium users, generate audio examples:                â”‚
â”‚   â†“                                                          â”‚
â”‚   Call Media Service                                        â”‚
â”‚   â†“                                                          â”‚
â”‚   Use ElevenLabs TTS to create:                            â”‚
â”‚   â€¢ Sample band 7 answers (audio)                          â”‚
â”‚   â€¢ Sample band 9 answers (audio)                          â”‚
â”‚   â€¢ Question prompts read by examiner voice                â”‚
â”‚   â†“                                                          â”‚
â”‚   This helps users:                                         â”‚
â”‚   â€¢ Understand expected quality                            â”‚
â”‚   â€¢ Practice pronunciation                                  â”‚
â”‚   â€¢ Learn pacing and intonation                            â”‚
â”‚   â†“                                                          â”‚
â”‚   Upload audio files to S3                                 â”‚
â”‚   â€¢ Path: /speaking/{test_session_id}/samples/             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 5: Store Complete Speaking Module in Database         â”‚
â”‚                                                              â”‚
â”‚ MongoDB document:                                            â”‚
â”‚ {                                                            â”‚
â”‚   "_id": ObjectId("..."),                                   â”‚
â”‚   "test_session_id": "uuid-...",                           â”‚
â”‚   "module": "speaking",                                     â”‚
â”‚   "difficulty": "band_6_7",                                â”‚
â”‚   "parts": [                                                â”‚
â”‚     {                                                        â”‚
â”‚       "part_number": 1,                                     â”‚
â”‚       "title": "Introduction & Interview",                 â”‚
â”‚       "duration_minutes": "4-5",                           â”‚
â”‚       "topics": [                                           â”‚
â”‚         {                                                    â”‚
â”‚           "topic": "Your Hometown",                        â”‚
â”‚           "questions": [...]                               â”‚
â”‚         },                                                   â”‚
â”‚         {                                                    â”‚
â”‚           "topic": "Your Daily Routine",                   â”‚
â”‚           "questions": [...]                               â”‚
â”‚         }                                                    â”‚
â”‚       ]                                                      â”‚
â”‚     },                                                       â”‚
â”‚     {                                                        â”‚
â”‚       "part_number": 2,                                     â”‚
â”‚       "title": "Long Turn",                                â”‚
â”‚       "preparation_time_seconds": 60,                      â”‚
â”‚       "speaking_time_seconds": "60-120",                   â”‚
â”‚       "cue_card": {...},                                    â”‚
â”‚       "sample_answers": {                                   â”‚
â”‚         "band_7": {                                         â”‚
â”‚           "text": "...",                                    â”‚
â”‚           "audio_url": "https://cdn.../band7_part2.mp3"   â”‚
â”‚         },                                                   â”‚
â”‚         "band_9": {                                         â”‚
â”‚           "text": "...",                                    â”‚
â”‚           "audio_url": "https://cdn.../band9_part2.mp3"   â”‚
â”‚         }                                                    â”‚
â”‚       }                                                      â”‚
â”‚     },                                                       â”‚
â”‚     {                                                        â”‚
â”‚       "part_number": 3,                                     â”‚
â”‚       "title": "Discussion",                               â”‚
â”‚       "duration_minutes": "4-5",                           â”‚
â”‚       "theme": "Reading and Literature",                   â”‚
â”‚       "questions": [...]                                    â”‚
â”‚     }                                                        â”‚
â”‚   ],                                                         â”‚
â”‚   "total_duration_minutes": "11-14",                       â”‚
â”‚   "created_at": ISODate("..."),                            â”‚
â”‚   "ai_cost": {                                              â”‚
â”‚     "question_generation": 0.10,                           â”‚
â”‚     "sample_audio_generation": 0.25,                       â”‚
â”‚     "total": 0.35                                           â”‚
â”‚   }                                                          â”‚
â”‚ }                                                            â”‚
â”‚   â†“                                                          â”‚
â”‚ Update PostgreSQL:                                          â”‚
â”‚ â€¢ Status: 'speaking_ready'                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    Speaking module generation complete (25-35 seconds)
    â†“
    Send WebSocket notification: "Speaking module ready âœ“"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FINAL ASSEMBLY & TEST READY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ All 4 Modules Generated in Parallel                         â”‚
â”‚                                                              â”‚
â”‚ Total generation time: 45-75 seconds                        â”‚
â”‚ (depending on parallel processing efficiency)              â”‚
â”‚                                                              â”‚
â”‚ Backend: Test Service                                       â”‚
â”‚   â†“                                                          â”‚
â”‚   Verify all modules are ready:                            â”‚
â”‚   âœ“ Listening: 40 questions + 4 audio files               â”‚
â”‚   âœ“ Reading: 40 questions + 3 passages                     â”‚
â”‚   âœ“ Writing: 2 tasks (with chart/prompt)                   â”‚
â”‚   âœ“ Speaking: 3 parts with all questions                   â”‚
â”‚   â†“                                                          â”‚
â”‚   Update test_sessions table in PostgreSQL:                â”‚
â”‚   {                                                          â”‚
â”‚     test_session_id: "uuid-...",                           â”‚
â”‚     user_id: "uuid-...",                                    â”‚
â”‚     status: "ready",                                        â”‚
â”‚     test_type: "academic",                                  â”‚
â”‚     difficulty: "band_6_7",                                â”‚
â”‚     listening_module_id: "...",                            â”‚
â”‚     reading_module_id: "...",                              â”‚
â”‚     writing_module_id: "...",                              â”‚
â”‚     speaking_module_id: "...",                             â”‚
â”‚     created_at: timestamp,                                  â”‚
â”‚     expires_at: timestamp + 7 days,                        â”‚
â”‚     total_ai_cost: 1.08, // USD                            â”‚
â”‚     generation_time_seconds: 58                            â”‚
â”‚   }                                                          â”‚
â”‚   â†“                                                          â”‚
â”‚   Cache test data in Redis:                                â”‚
â”‚   â€¢ Key: test_session:{test_session_id}                    â”‚
â”‚   â€¢ TTL: 3 hours                                            â”‚
â”‚   â€¢ Value: Complete test data for quick access             â”‚
â”‚   â†“                                                          â”‚
â”‚   Track analytics:                                          â”‚
â”‚   â€¢ Log to analytics service                               â”‚
â”‚   â€¢ Increment user's test quota usage                      â”‚
â”‚   â€¢ Record generation metrics                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Send Final Notification to Frontend                         â”‚
â”‚                                                              â”‚
â”‚ Via WebSocket:                                              â”‚
â”‚ {                                                            â”‚
â”‚   "event": "test_ready",                                    â”‚
â”‚   "test_session_id": "uuid-...",                           â”‚
â”‚   "message": "Your test is ready!",                        â”‚
â”‚   "redirect_url": "/test/uuid-.../start"                   â”‚
â”‚ }                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: Update UI                                          â”‚
â”‚                                                              â”‚
â”‚ Hide loading screen                                         â”‚
â”‚ Show success message                                        â”‚
â”‚ Display "Start Test" button                                â”‚
â”‚                                                              â”‚
â”‚ Show test overview:                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚ â”‚ âœ… Your Test is Ready!                            â”‚      â”‚
â”‚ â”‚                                                    â”‚      â”‚
â”‚ â”‚ Test Overview:                                    â”‚      â”‚
â”‚ â”‚ â€¢ Listening: 30 minutes (40 questions)           â”‚      â”‚
â”‚ â”‚ â€¢ Reading: 60 minutes (40 questions)             â”‚      â”‚
â”‚ â”‚ â€¢ Writing: 60 minutes (2 tasks)                  â”‚      â”‚
â”‚ â”‚ â€¢ Speaking: 15 minutes (3 parts)                 â”‚      â”‚
â”‚ â”‚                                                    â”‚      â”‚
â”‚ â”‚ Total Time: ~2 hours 45 minutes                  â”‚      â”‚
â”‚ â”‚                                                    â”‚      â”‚
â”‚ â”‚ This test expires in 7 days                      â”‚      â”‚
â”‚ â”‚                                                    â”‚      â”‚
â”‚ â”‚ [Start Test Now] [Schedule for Later]           â”‚      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
END: Test generation complete, user ready to start
```

---

### **FLOW 3: Taking a Complete Test - Listening Module**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LISTENING TEST FLOW (30 + 10 minutes)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User clicks "Start Test"
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: Pre-Test Instructions Page                        â”‚
â”‚                                                              â”‚
â”‚ "IELTS Listening Test Instructions"                        â”‚
â”‚                                                              â”‚
â”‚ â€¢ You will hear 4 audio sections                           â”‚
â”‚ â€¢ You will answer 40 questions in total                    â”‚
â”‚ â€¢ You can play each section only ONCE                      â”‚
â”‚ â€¢ You can see questions while listening                    â”‚
â”‚ â€¢ After all sections, you get 10 minutes to transfer      â”‚
â”‚   answers                                                   â”‚
â”‚                                                              â”‚
â”‚ Equipment check:                                            â”‚
â”‚ [Test Audio] â† User can test speakers/headphones          â”‚
â”‚                                                              â”‚
â”‚ [I'm Ready - Start Listening Test]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    User clicks "Start Listening Test"
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend: Test Service                                        â”‚
â”‚ â€¢ Update test_session status: 'listening_in_progress'      â”‚
â”‚ â€¢ Record start time                                         â”‚
â”‚ â€¢ Fetch listening module from MongoDB/Redis cache          â”‚
â”‚ â€¢ Return Section 1 data to frontend                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: Listening Test Interface - SECTION 1             â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Timer: 03:05 remaining        Section 1 of 4         â”‚   â”‚
â”‚ â”‚ Questions 1-10                                        â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Audio Player                                          â”‚   â”‚
â”‚ â”‚ [â–¶ Playing...] â•â•â•â•â•â•â•â•â—â•â•â•â•â•â•â•â• 01:23 / 03:45      â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ [This audio will play only once]                     â”‚   â”‚
â”‚ â”‚ Volume: â–â–‚â–ƒâ–„â–…â–†â–‡â–ˆ                                     â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚ Questions 1-4: Complete the form below                     â”‚
â”‚ Write NO MORE THAN TWO WORDS AND/OR A NUMBER              â”‚
â”‚                                                              â”‚
â”‚ Apartment Details                                          â”‚
â”‚ Monthly rent: Â£ [________] (Question 1)                    â”‚
â”‚ Number of bedrooms: [________] (Question 2)                â”‚
â”‚ Available from: [________] (Question 3)                    â”‚
â”‚ Deposit required: Â£ [________] (Question 4)                â”‚
â”‚                                                              â”‚
â”‚ Questions 5-7: Choose the correct letter, A, B or C        â”‚
â”‚                                                              â”‚
â”‚ 5. The apartment is located:                               â”‚
â”‚    â—‹ A) Near the city center                               â”‚
â”‚    â—‹ B) In a quiet suburb                                  â”‚
â”‚    â—‹ C) Close to the university                            â”‚
â”‚                                                              â”‚
â”‚ 6. Parking is:                                              â”‚
â”‚    â—‹ A) Included in the rent                               â”‚
â”‚    â—‹ B) Available for an extra fee                         â”‚
â”‚    â—‹ C) Not available                                       â”‚
â”‚                                                              â”‚
â”‚ 7. The landlord prefers:                                   â”‚
â”‚    â—‹ A) Students                                            â”‚
â”‚    â—‹ B) Professionals                                       â”‚
â”‚    â—‹ C) No preference                                       â”‚
â”‚                                                              â”‚
â”‚ Questions 8-10: Write NO MORE THAN THREE WORDS             â”‚
â”‚                                                              â”‚
â”‚ 8. Utilities included: [________________]                  â”‚
â”‚ 9. Lease duration: [________________]                      â”‚
â”‚ 10. Contact method: [________________]                     â”‚
â”‚                                                              â”‚
â”‚ [Mark for Review] [Clear Answers]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    Audio plays automatically
    â†“
    User fills in answers while listening
    â†“
    Frontend auto-saves answers every 10 seconds to backend
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Auto-save mechanism                                          â”‚
â”‚ â€¢ Uses debounced AJAX calls                                 â”‚
â”‚ â€¢ Saves to Redis (temp storage)                            â”‚
â”‚ â€¢ No page refresh required                                  â”‚
â”‚ â€¢ "Saved" indicator appears briefly                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    Audio Section 1 ends (3:45 duration)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Brief Pause Screen (10 seconds)                             â”‚
â”‚                                                              â”‚
â”‚ "Section 1 complete. Section 2 will begin in 10 seconds." â”‚
â”‚                                                              â”‚
â”‚ User can review Section 1 answers during this pause        â”‚
â”‚                                                              â”‚
â”‚ Countdown: 10... 9... 8...                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    Automatically proceed to Section 2
    â†“
    [Similar process for Sections 2, 3, and 4]
    [Each section: 3-4 minutes audio + 10 questions]
    â†“
    Total listening time: ~30 minutes
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ All 4 Sections Complete                                     â”‚
â”‚                                                              â”‚
â”‚ "You have now completed all listening sections."           â”‚
â”‚                                                              â”‚
â”‚ "You have 10 minutes to transfer and check your answers."  â”‚
â”‚                                                              â”‚
â”‚ Transfer Time: 10:00                                        â”‚
â”‚                                                              â”‚
â”‚ [Review All Answers]                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Answer Review Interface                                      â”‚
â”‚                                                              â”‚
â”‚ Shows all 40 questions across 4 sections                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Section 1: Questions 1-10                             â”‚   â”‚
â”‚ â”‚ [Expand/Collapse]                                      â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Answered: 10/10 âœ“                                     â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ 1. [850]                                              â”‚   â”‚
â”‚ â”‚ 2. [three / 3]                                        â”‚   â”‚
â”‚ â”‚ 3. [next month]                                       â”‚   â”‚
â”‚ â”‚ ...                                                    â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚ â”‚ Section 2: Questions 11-20                            â”‚   â”‚
â”‚ â”‚ Answered: 9/10 âš                                       â”‚   â”‚
â”‚ â”‚ Question 15 is blank!                                 â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚ ... Sections 3 & 4 ...                                      â”‚
â”‚                                                              â”‚
â”‚ Timer: 08:23 remaining                                      â”‚
â”‚                                                              â”‚
â”‚ [Submit Listening Test]                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    User clicks "Submit Listening Test"
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Confirmation Dialog                                          â”‚
â”‚                                                              â”‚
â”‚ "Are you sure you want to submit?"                         â”‚
â”‚                                                              â”‚
â”‚ "You have answered 39 out of 40 questions."                â”‚
â”‚ "Question 15 is blank."                                     â”‚
â”‚                                                              â”‚
â”‚ [Go Back] [Submit Now]                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    User clicks "Submit Now"
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend sends all answers to Backend                       â”‚
â”‚                                                              â”‚
â”‚ POST /api/v1/submissions/listening                         â”‚
â”‚ {                                                            â”‚
â”‚   "test_session_id": "uuid-...",                           â”‚
â”‚   "answers": [                                              â”‚
â”‚     {                                                        â”‚
â”‚       "question_number": 1,                                 â”‚
â”‚       "user_answer": "850",                                â”‚
â”‚       "time_spent_seconds": 15                             â”‚
â”‚     },                                                       â”‚
â”‚     // ... 39 more answers                                 â”‚
â”‚   ],                                                         â”‚
â”‚   "submission_timestamp": "2025-11-08T14:32:15Z",          â”‚
â”‚   "time_taken_seconds": 2415 // 40:15                      â”‚
â”‚ }                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend: Test Service                                        â”‚
â”‚                                                              â”‚
â”‚ Step 1: Validate submission                                 â”‚
â”‚ â€¢ Check test_session exists                                â”‚
â”‚ â€¢ Verify user authorization                                â”‚
â”‚ â€¢ Check not already submitted                              â”‚
â”‚                                                              â”‚
â”‚ Step 2: Store raw answers in PostgreSQL                    â”‚
â”‚ â€¢ Create record in listening_submissions table             â”‚
â”‚ â€¢ Status: 'submitted'                                       â”‚
â”‚                                                              â”‚
â”‚ Step 3: Auto-grade (No AI needed!)                         â”‚
â”‚ â€¢ Retrieve correct answers from MongoDB                    â”‚
â”‚ â€¢ Compare user answers with correct answers                â”‚
â”‚ â€¢ Account for alternative accepted answers                 â”‚
â”‚ â€¢ Case-insensitive matching                                â”‚
â”‚ â€¢ Allow for spelling variations (configurable)             â”‚
â”‚   Example: "three" == "3" == "Three"                       â”‚
â”‚                                                              â”‚
â”‚ Grading logic:                                              â”‚
â”‚ correct_count = 0                                           â”‚
â”‚ for each question:                                          â”‚
â”‚   user_ans = normalize(user_answer)                        â”‚
â”‚   if user_ans in [correct_answer, *alternatives]:          â”‚
â”‚     correct_count += 1                                      â”‚
â”‚     mark_as_correct(question_number)                       â”‚
â”‚   else:                                                      â”‚
â”‚     mark_as_incorrect(question_number)                     â”‚
â”‚                                                              â”‚
â”‚ Step 4: Calculate band score                                â”‚
â”‚ â€¢ Use official IELTS conversion table                      â”‚
â”‚                                                              â”‚
â”‚ Academic Listening Score Table:                            â”‚
â”‚ 39-40 correct = Band 9.0                                    â”‚
â”‚ 37-38 correct = Band 8.5                                    â”‚
â”‚ 35-36 correct = Band 8.0                                    â”‚
â”‚ 32-34 correct = Band 7.5                                    â”‚
â”‚ 30-31 correct = Band 7.0                                    â”‚
â”‚ 26-29 correct = Band 6.5                                    â”‚
â”‚ 23-25 correct = Band 6.0                                    â”‚
â”‚ 18-22 correct = Band 5.5                                    â”‚
â”‚ 16-17 correct = Band 5.0                                    â”‚
â”‚ 13-15 correct = Band 4.5                                    â”‚
â”‚ 10-12 correct = Band 4.0                                    â”‚
â”‚                                                              â”‚
â”‚ Example: 30 correct â†’ Band 7.0                             â”‚
â”‚                                                              â”‚
â”‚ Step 5: Store results in PostgreSQL                        â”‚
â”‚ UPDATE listening_submissions SET                            â”‚
â”‚   correct_answers = 30,                                     â”‚
â”‚   incorrect_answers = 10,                                   â”‚
â”‚   band_score = 7.0,                                         â”‚
â”‚   detailed_results = {...},  // JSON                       â”‚
â”‚   evaluated_at = NOW(),                                     â”‚
â”‚   status = 'evaluated'                                      â”‚
â”‚                                                              â”‚
â”‚ Step 6: Update test_session                                â”‚
â”‚ â€¢ listening_score = 7.0                                     â”‚
â”‚ â€¢ listening_completed_at = NOW()                           â”‚
â”‚                                                              â”‚
â”‚ Step 7: Return response to frontend                        â”‚
â”‚ {                                                            â”‚
â”‚   "success": true,                                          â”‚
â”‚   "band_score": 7.0,                                        â”‚
â”‚   "correct_answers": 30,                                    â”‚
â”‚   "total_questions": 40,                                    â”‚
â”‚   "accuracy_percentage": 75,                               â”‚
â”‚   "results_url": "/results/listening/uuid-..."             â”‚
â”‚ }                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    Response returned to frontend (< 2 seconds)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: Listening Results Page                            â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ âœ… Listening Test Complete!                          â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Your Band Score: 7.0                                  â”‚   â”‚
â”‚ â”‚ [Visual: Circle gauge showing 7.0]                   â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Performance:                                          â”‚   â”‚
â”‚ â”‚ âœ“ Correct: 30/40 (75%)                               â”‚   â”‚
â”‚ â”‚ âœ— Incorrect: 10/40 (25%)                             â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Section Breakdown:                                    â”‚   â”‚
â”‚ â”‚ â€¢ Section 1: 8/10 âœ“âœ“âœ“âœ“âœ“âœ“âœ“âœ“âœ—âœ—                        â”‚   â”‚
â”‚ â”‚ â€¢ Section 2: 9/10 âœ“âœ“âœ“âœ“âœ“âœ“âœ“âœ“âœ“âœ—                        â”‚   â”‚
â”‚ â”‚ â€¢ Section 3: 7/10 âœ“âœ“âœ“âœ“âœ“âœ“âœ“âœ—âœ—âœ—                        â”‚   â”‚
â”‚ â”‚ â€¢ Section 4: 6/10 âœ“âœ“âœ“âœ“âœ“âœ“âœ—âœ—âœ—âœ—                        â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ [View Detailed Feedback] [Continue to Reading]       â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    User clicks "View Detailed Feedback"
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Detailed Feedback Page                                      â”‚
â”‚                                                              â”‚
â”‚ Shows each question with:                                   â”‚
â”‚ â€¢ Your answer                                               â”‚
â”‚ â€¢ Correct answer                                            â”‚
â”‚ â€¢ Audio timestamp where answer appears                     â”‚
â”‚ â€¢ Explanation                                               â”‚
â”‚                                                              â”‚
â”‚ Example:                                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Question 1                                            â”‚   â”‚
â”‚ â”‚ Monthly rent: Â£ ____                                  â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Your Answer: 850 âœ“                                    â”‚   â”‚
â”‚ â”‚ Correct Answer: 850                                   â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Audio Timestamp: 00:45                                â”‚   â”‚
â”‚ â”‚ [ğŸ”Š Play Audio Snippet]                               â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Transcript: "...the monthly rent is eight hundred    â”‚   â”‚
â”‚ â”‚ and fifty pounds..."                                  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Question 5                                            â”‚   â”‚
â”‚ â”‚ The apartment is located:                             â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Your Answer: A) Near the city center âœ—               â”‚   â”‚
â”‚ â”‚ Correct Answer: C) Close to the university           â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Audio Timestamp: 01:32                                â”‚   â”‚
â”‚ â”‚ [ğŸ”Š Play Audio Snippet]                               â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Transcript: "...it's just a five-minute walk from    â”‚   â”‚
â”‚ â”‚ the university campus..."                             â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Explanation: The key phrase "five-minute walk from   â”‚   â”‚
â”‚ â”‚ the university" indicates proximity to the            â”‚   â”‚
â”‚ â”‚ university, not the city center.                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚ ... all 40 questions ...                                    â”‚
â”‚                                                              â”‚
â”‚ [Download PDF Report] [Continue to Next Module]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
END: Listening module complete
```

---

### **FLOW 4: Taking a Complete Test - Reading Module**

```
[Similar detailed flow as Listening]

Key differences:
â€¢ No audio files
â€¢ 60 minutes total (no transfer time)
â€¢ 3 passages with 13, 13, 14 questions
â€¢ Mix of auto-grading and AI evaluation for subjective answers
â€¢ Evaluation time: < 1 minute
```

---

### **FLOW 5: Taking a Complete Test - Writing Module with AI Evaluation**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            WRITING TEST FLOW (60 minutes total)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User clicks "Start Writing Test"
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: Writing Test Interface                            â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ â± Total Time: 60:00          [Task 1] [Task 2]      â”‚   â”‚
â”‚ â”‚ Recommended: Task 1 (20 min) | Task 2 (40 min)      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚ Currently viewing: TASK 1                                   â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Writing Task 1                                        â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ You should spend about 20 minutes on this task.      â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ The bar chart below shows the percentage of          â”‚   â”‚
â”‚ â”‚ households owning different types of vehicles in     â”‚   â”‚
â”‚ â”‚ three countries in 2020.                              â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ [Chart/Graph Image displayed here]                   â”‚   â”‚
â”‚ â”‚ [ğŸ“Š Full screen view]                                â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Summarize the information by selecting and           â”‚   â”‚
â”‚ â”‚ reporting the main features, and make comparisons    â”‚   â”‚
â”‚ â”‚ where relevant.                                       â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Write at least 150 words.                            â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Your Answer:                                          â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ [Rich Text Editor]                                    â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚ â”‚ â”‚ B I U | Font | Size | [Formatting tools]       â”‚  â”‚   â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚   â”‚
â”‚ â”‚ â”‚                                                 â”‚  â”‚   â”‚
â”‚ â”‚ â”‚ [User types here...]                            â”‚  â”‚   â”‚
â”‚ â”‚ â”‚                                                 â”‚  â”‚   â”‚
â”‚ â”‚ â”‚                                                 â”‚  â”‚   â”‚
â”‚ â”‚ â”‚                                                 â”‚  â”‚   â”‚
â”‚ â”‚ â”‚                                                 â”‚  â”‚   â”‚
â”‚ â”‚ â”‚                                                 â”‚  â”‚   â”‚
â”‚ â”‚ â”‚                                                 â”‚  â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Word Count: 0 / 150 minimum                          â”‚   â”‚
â”‚ â”‚ â± Time on Task 1: 05:23                              â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ âœ“ Auto-saved 10 seconds ago                          â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚ [Switch to Task 2] [Submit Writing Test]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    User types Task 1 answer (20 minutes recommended)
    â†“
    Auto-save every 30 seconds to backend (Redis)
    â†“
    User switches to Task 2
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Task 2 Interface                                             â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Writing Task 2                                        â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ You should spend about 40 minutes on this task.      â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Write about the following topic:                     â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Some people believe that social media has made       â”‚   â”‚
â”‚ â”‚ communication better, while others think it has      â”‚   â”‚
â”‚ â”‚ made it worse.                                        â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Discuss both views and give your own opinion.        â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Give reasons for your answer and include any         â”‚   â”‚
â”‚ â”‚ relevant examples from your own knowledge or         â”‚   â”‚
â”‚ â”‚ experience.                                           â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Write at least 250 words.                            â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚ [Similar editor as Task 1]                                  â”‚
â”‚ Word Count: 0 / 250 minimum                                â”‚
â”‚ â± Time on Task 2: 00:00                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    User writes Task 2 essay (40 minutes recommended)
    â†“
    User can switch between Task 1 and Task 2 anytime
    â†“
    60 minutes elapsed (or user finishes early)
    â†“
    User clicks "Submit Writing Test"
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Validation Check                                             â”‚
â”‚                                                              â”‚
â”‚ Task 1 word count: 175 words âœ“                             â”‚
â”‚ Task 2 word count: 245 words âš                              â”‚
â”‚                                                              â”‚
â”‚ Warning: "Task 2 is slightly under 250 words. You may      â”‚
â”‚ lose marks for not meeting the word requirement.           â”‚
â”‚ Do you want to continue writing or submit now?"            â”‚
â”‚                                                              â”‚
â”‚ [Continue Writing] [Submit Anyway]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    User clicks "Submit Anyway"
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend sends essays to Backend                            â”‚
â”‚                                                              â”‚
â”‚ POST /api/v1/submissions/writing                           â”‚
â”‚ {                                                            â”‚
â”‚   "test_session_id": "uuid-...",                           â”‚
â”‚   "task1": {                                                â”‚
â”‚     "answer_text": "The bar chart illustrates...",         â”‚
â”‚     "word_count": 175,                                      â”‚
â”‚     "time_spent_seconds": 1223, // 20:23                   â”‚
â”‚     "chart_url": "https://cdn.../chart.png"                â”‚
â”‚   },                                                         â”‚
â”‚   "task2": {                                                â”‚
â”‚     "answer_text": "In today's digital age...",            â”‚
â”‚     "word_count": 245,                                      â”‚
â”‚     "time_spent_seconds": 2377, // 39:37                   â”‚
â”‚     "question": "Some people believe that..."              â”‚
â”‚   },                                                         â”‚
â”‚   "total_time_seconds": 3600,                              â”‚
â”‚   "submission_timestamp": "2025-11-08T15:45:00Z"           â”‚
â”‚ }                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend: Test Service                                        â”‚
â”‚                                                              â”‚
â”‚ Step 1: Store raw submissions in PostgreSQL                â”‚
â”‚ â€¢ Create records in writing_submissions table              â”‚
â”‚ â€¢ Status: 'submitted'                                       â”‚
â”‚ â€¢ Both Task 1 and Task 2 essays stored                     â”‚
â”‚                                                              â”‚
â”‚ Step 2: Basic Pre-processing                                â”‚
â”‚ â€¢ Verify word counts                                        â”‚
â”‚ â€¢ Run basic spell check (LanguageTool API)                 â”‚
â”‚ â€¢ Detect language (should be English)                      â”‚
â”‚ â€¢ Plagiarism check against database                        â”‚
â”‚                                                              â”‚
â”‚ Step 3: Add to evaluation queue                            â”‚
â”‚ â€¢ Create job in evaluation-queue                           â”‚
â”‚ â€¢ Priority: MEDIUM (2-3 minute evaluation)                 â”‚
â”‚ â€¢ Job data: {                                               â”‚
â”‚     submission_ids: [task1_id, task2_id],                  â”‚
â”‚     essays: [task1_text, task2_text],                      â”‚
â”‚     questions: [...],                                       â”‚
â”‚     user_id,                                                â”‚
â”‚     test_session_id                                         â”‚
â”‚   }                                                          â”‚
â”‚                                                              â”‚
â”‚ Step 4: Return immediate response to frontend              â”‚
â”‚ {                                                            â”‚
â”‚   "success": true,                                          â”‚
â”‚   "message": "Essays submitted successfully",              â”‚
â”‚   "status": "evaluating",                                   â”‚
â”‚   "estimated_time_minutes": 3,                             â”‚
â”‚   "submission_ids": ["task1_id", "task2_id"]               â”‚
â”‚ }                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: Evaluation In Progress Screen                     â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ âœ… Your writing test has been submitted!             â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ ğŸ¤– AI is evaluating your essays...                   â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ [Progress Animation]                                  â”‚   â”‚
â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 60%                      â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Stage: Evaluating Task 2                             â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Estimated time remaining: 1 minute                   â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ What we're analyzing:                                â”‚   â”‚
â”‚ â”‚ âœ“ Task Achievement                                    â”‚   â”‚
â”‚ â”‚ âœ“ Coherence & Cohesion                               â”‚   â”‚
â”‚ â”‚ â³ Lexical Resource (in progress)                    â”‚   â”‚
â”‚ â”‚ â³ Grammatical Range & Accuracy                       â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚ WebSocket connection active for real-time updates          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    Meanwhile, in the background...
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend: Evaluation Service (Worker)                        â”‚
â”‚                                                              â”‚
â”‚ Picks up job from evaluation-queue                         â”‚
â”‚   â†“                                                          â”‚
â”‚ FOR EACH TASK (Task 1 and Task 2):                         â”‚
â”‚   â†“                                                          â”‚
â”‚   TASK 1 EVALUATION:                                        â”‚
â”‚   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚
â”‚   â†“                                                          â”‚
â”‚   Call AI Orchestration Service                            â”‚
â”‚   Route to: Claude Sonnet 4.5                              â”‚
â”‚   (Best for detailed evaluation)                           â”‚
â”‚   â†“                                                          â”‚
â”‚   Prompt sent to Claude:                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ System: You are an experienced IELTS examiner     â”‚   â”‚
â”‚   â”‚ with 15 years of experience evaluating Writing   â”‚   â”‚
â”‚   â”‚ Task 1.                                            â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ TASK QUESTION:                                     â”‚   â”‚
â”‚   â”‚ The bar chart shows the percentage of households  â”‚   â”‚
â”‚   â”‚ owning different types of vehicles in three       â”‚   â”‚
â”‚   â”‚ countries in 2020.                                 â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Chart data: {json_data}                           â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ CANDIDATE'S ANSWER:                               â”‚   â”‚
â”‚   â”‚ [Full Task 1 essay text - 175 words]             â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ EVALUATION INSTRUCTIONS:                          â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Evaluate this Task 1 response according to       â”‚   â”‚
â”‚   â”‚ official IELTS band descriptors (0-9 scale).     â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ 1. TASK ACHIEVEMENT (0-9):                        â”‚   â”‚
â”‚   â”‚    - Has the candidate addressed all parts?      â”‚   â”‚
â”‚   â”‚    - Are key features clearly presented?         â”‚   â”‚
â”‚   â”‚    - Is the overview present?                     â”‚   â”‚
â”‚   â”‚    - Are comparisons made where relevant?        â”‚   â”‚
â”‚   â”‚    - Is the response fully developed with        â”‚   â”‚
â”‚   â”‚      supporting details?                         â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ 2. COHERENCE AND COHESION (0-9):                 â”‚   â”‚
â”‚   â”‚    - Is information logically organized?         â”‚   â”‚
â”‚   â”‚    - Are paragraphs used effectively?            â”‚   â”‚
â”‚   â”‚    - Are cohesive devices used appropriately?   â”‚   â”‚
â”‚   â”‚    - Is there clear progression?                  â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ 3. LEXICAL RESOURCE (0-9):                       â”‚   â”‚
â”‚   â”‚    - Range of vocabulary                          â”‚   â”‚
â”‚   â”‚    - Accuracy of word choice                      â”‚   â”‚
â”‚   â”‚    - Spelling accuracy                            â”‚   â”‚
â”‚   â”‚    - Use of less common vocabulary               â”‚   â”‚
â”‚   â”‚    - Collocation and word formation              â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ 4. GRAMMATICAL RANGE AND ACCURACY (0-9):         â”‚   â”‚
â”‚   â”‚    - Variety of sentence structures              â”‚   â”‚
â”‚   â”‚    - Accuracy of grammar                          â”‚   â”‚
â”‚   â”‚    - Use of complex structures                    â”‚   â”‚
â”‚   â”‚    - Punctuation                                  â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ CRITICAL: Return your evaluation in this EXACT   â”‚   â”‚
â”‚   â”‚ JSON format. DO NOT include any text outside     â”‚   â”‚
â”‚   â”‚ of the JSON structure:                            â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ {                                                  â”‚   â”‚
â”‚   â”‚   "task_achievement": 7.0,                        â”‚   â”‚
â”‚   â”‚   "coherence_cohesion": 7.0,                      â”‚   â”‚
â”‚   â”‚   "lexical_resource": 6.5,                        â”‚   â”‚
â”‚   â”‚   "grammar_accuracy": 7.0,                        â”‚   â”‚
â”‚   â”‚   "overall_band": 7.0,                            â”‚   â”‚
â”‚   â”‚   "word_count": 175,                              â”‚   â”‚
â”‚   â”‚   "strengths": [                                   â”‚   â”‚
â”‚   â”‚     "Clear overview provided",                    â”‚   â”‚
â”‚   â”‚     "Logical organization with paragraphs",       â”‚   â”‚
â”‚   â”‚     "Appropriate use of data from chart",         â”‚   â”‚
â”‚   â”‚     "Good range of cohesive devices"              â”‚   â”‚
â”‚   â”‚   ],                                               â”‚   â”‚
â”‚   â”‚   "weaknesses": [                                  â”‚   â”‚
â”‚   â”‚     "Some minor grammatical errors",              â”‚   â”‚
â”‚   â”‚     "Could include more specific comparisons",    â”‚   â”‚
â”‚   â”‚     "Vocabulary could be more varied"             â”‚   â”‚
â”‚   â”‚   ],                                               â”‚   â”‚
â”‚   â”‚   "specific_errors": [                            â”‚   â”‚
â”‚   â”‚     {                                              â”‚   â”‚
â”‚   â”‚       "error_type": "grammar",                    â”‚   â”‚
â”‚   â”‚       "sentence": "The data shows that people    â”‚   â”‚
â”‚   â”‚                    is more interested",           â”‚   â”‚
â”‚   â”‚       "issue": "Subject-verb agreement",          â”‚   â”‚
â”‚   â”‚       "correction": "The data shows that people  â”‚   â”‚
â”‚   â”‚                      are more interested",        â”‚   â”‚
â”‚   â”‚       "explanation": "Use 'are' with plural     â”‚   â”‚
â”‚   â”‚                       'people'"                   â”‚   â”‚
â”‚   â”‚     },                                             â”‚   â”‚
â”‚   â”‚     // ... more errors (max 10)                   â”‚   â”‚
â”‚   â”‚   ],                                               â”‚   â”‚
â”‚   â”‚   "detailed_feedback": "Your response provides  â”‚   â”‚
â”‚   â”‚                        a clear overview of the   â”‚   â”‚
â”‚   â”‚                        main trends... [200-300   â”‚   â”‚
â”‚   â”‚                        words of comprehensive    â”‚   â”‚
â”‚   â”‚                        feedback]",                â”‚   â”‚
â”‚   â”‚   "improvement_suggestions": [                    â”‚   â”‚
â”‚   â”‚     "To achieve Band 7.5+, include more          â”‚   â”‚
â”‚   â”‚      specific data comparisons",                  â”‚   â”‚
â”‚   â”‚     "Use a wider range of vocabulary to          â”‚   â”‚
â”‚   â”‚      describe trends (e.g., 'surged',            â”‚   â”‚
â”‚   â”‚      'plummeted')",                               â”‚   â”‚
â”‚   â”‚     "Ensure all grammar is accurate,             â”‚   â”‚
â”‚   â”‚      especially subject-verb agreement"           â”‚   â”‚
â”‚   â”‚   ],                                               â”‚   â”‚
â”‚   â”‚   "band_descriptor_rationale": {                  â”‚   â”‚
â”‚   â”‚     "task_achievement": "Band 7: Covers          â”‚   â”‚
â”‚   â”‚                         requirements with         â”‚   â”‚
â”‚   â”‚                         clear overview...",       â”‚   â”‚
â”‚   â”‚     "coherence_cohesion": "Band 7: Logically    â”‚   â”‚
â”‚   â”‚                           organized...",          â”‚   â”‚
â”‚   â”‚     "lexical_resource": "Band 6.5: Adequate     â”‚   â”‚
â”‚   â”‚                         range but some           â”‚   â”‚
â”‚   â”‚                         repetition...",           â”‚   â”‚
â”‚   â”‚     "grammar_accuracy": "Band 7: Variety of     â”‚   â”‚
â”‚   â”‚                         structures with few      â”‚   â”‚
â”‚   â”‚                         errors..."                â”‚   â”‚
â”‚   â”‚   }                                                â”‚   â”‚
â”‚   â”‚ }                                                  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â†“                                                          â”‚
â”‚   Claude processes (20-30 seconds)                         â”‚
â”‚   â†“                                                          â”‚
â”‚   Claude returns JSON evaluation                           â”‚
â”‚   â†“                                                          â”‚
â”‚   Validation Service validates response:                   â”‚
â”‚   â€¢ Check JSON structure is correct                        â”‚
â”‚   â€¢ Verify all band scores are 0-9                         â”‚
â”‚   â€¢ Ensure overall_band is reasonable average              â”‚
â”‚   â€¢ Verify feedback is constructive and detailed           â”‚
â”‚   â†“                                                          â”‚
â”‚   If validation passes:                                     â”‚
â”‚   â€¢ Store Task 1 evaluation in PostgreSQL                  â”‚
â”‚   â€¢ Update status: 'task1_evaluated'                       â”‚
â”‚   â†“                                                          â”‚
â”‚   Send WebSocket update to frontend:                       â”‚
â”‚   "Task 1 evaluated âœ“ - Now evaluating Task 2..."         â”‚
â”‚   â†“                                                          â”‚
â”‚   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚
â”‚   â†“                                                          â”‚
â”‚   TASK 2 EVALUATION:                                        â”‚
â”‚   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚
â”‚   â†“                                                          â”‚
â”‚   Similar process as Task 1, but with Task 2 criteria:    â”‚
â”‚   â†“                                                          â”‚
â”‚   Prompt to Claude Sonnet 4.5:                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ System: IELTS examiner for Writing Task 2        â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ ESSAY QUESTION:                                    â”‚   â”‚
â”‚   â”‚ Some people believe that social media has made   â”‚   â”‚
â”‚   â”‚ communication better, while others think it has  â”‚   â”‚
â”‚   â”‚ made it worse. Discuss both views and give your â”‚   â”‚
â”‚   â”‚ own opinion.                                       â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ CANDIDATE'S ESSAY:                                â”‚   â”‚
â”‚   â”‚ [Full Task 2 essay - 245 words]                  â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Evaluate according to Task 2 criteria:           â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ 1. TASK RESPONSE (0-9):                          â”‚   â”‚
â”‚   â”‚    - Are all parts of the question addressed?   â”‚   â”‚
â”‚   â”‚    - Is there a clear position/opinion?          â”‚   â”‚
â”‚   â”‚    - Are ideas fully developed?                   â”‚   â”‚
â”‚   â”‚    - Are relevant examples provided?              â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ 2. COHERENCE AND COHESION (0-9):                 â”‚   â”‚
â”‚   â”‚    - Logical organization of ideas                â”‚   â”‚
â”‚   â”‚    - Effective paragraphing                       â”‚   â”‚
â”‚   â”‚    - Appropriate use of cohesive devices         â”‚   â”‚
â”‚   â”‚    - Clear progression of ideas                   â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ 3. LEXICAL RESOURCE (0-9):                       â”‚   â”‚
â”‚   â”‚    [Same as Task 1]                               â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ 4. GRAMMATICAL RANGE AND ACCURACY (0-9):         â”‚   â”‚
â”‚   â”‚    [Same as Task 1]                               â”‚   â”‚
â”‚   â”‚                                                    â”‚   â”‚
â”‚   â”‚ Return JSON with same structure as Task 1...     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â†“                                                          â”‚
â”‚   Claude evaluates Task 2 (25-35 seconds)                  â”‚
â”‚   â†“                                                          â”‚
â”‚   Returns detailed JSON evaluation                         â”‚
â”‚   â†“                                                          â”‚
â”‚   Validation + Storage                                      â”‚
â”‚   â†“                                                          â”‚
â”‚   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚
â”‚   â†“                                                          â”‚
â”‚   CALCULATE OVERALL WRITING BAND:                          â”‚
â”‚   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”   â”‚
â”‚   â†“                                                          â”‚
â”‚   Task 1 Band: 7.0                                          â”‚
â”‚   Task 2 Band: 6.5                                          â”‚
â”‚   â†“                                                          â”‚
â”‚   IELTS Writing scoring:                                    â”‚
â”‚   â€¢ Task 2 weighs 2x more than Task 1                      â”‚
â”‚   â€¢ Formula: (Task1 + Task2 + Task2) / 3                   â”‚
â”‚   â†“                                                          â”‚
â”‚   Overall Writing Band = (7.0 + 6.5 + 6.5) / 3 = 6.67     â”‚
â”‚   Rounded to nearest 0.5 = 6.5                             â”‚
â”‚   â†“                                                          â”‚
â”‚   Store overall band in test_sessions table                â”‚
â”‚   writing_band_score = 6.5                                  â”‚
â”‚   â†“                                                          â”‚
â”‚   Update submission status: 'fully_evaluated'              â”‚
â”‚   â†“                                                          â”‚
â”‚   Total AI cost for writing evaluation:                    â”‚
â”‚   â€¢ Task 1: ~$0.08                                          â”‚
â”‚   â€¢ Task 2: ~$0.12                                          â”‚
â”‚   â€¢ Total: ~$0.20                                           â”‚
â”‚   â†“                                                          â”‚
â”‚   Log cost in database for tracking                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    Total evaluation time: 60-90 seconds
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Send WebSocket notification to frontend                     â”‚
â”‚                                                              â”‚
â”‚ {                                                            â”‚
â”‚   "event": "evaluation_complete",                          â”‚
â”‚   "module": "writing",                                      â”‚
â”‚   "overall_band": 6.5,                                      â”‚
â”‚   "task1_band": 7.0,                                        â”‚
â”‚   "task2_band": 6.5,                                        â”‚
â”‚   "message": "Your writing evaluation is ready!",          â”‚
â”‚   "results_url": "/results/writing/uuid-..."               â”‚
â”‚ }                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: Writing Results Page                              â”‚
â”‚                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ âœ… Writing Test Evaluated!                           â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ Overall Writing Band: 6.5                            â”‚   â”‚
â”‚ â”‚ [Large circular gauge showing 6.5]                   â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚ â”‚ â”‚    TASK 1: 7.0   â”‚    TASK 2: 6.5   â”‚              â”‚   â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚   â”‚
â”‚ â”‚ â”‚ Task Achievement â”‚ Task Response    â”‚              â”‚   â”‚
â”‚ â”‚ â”‚      7.0         â”‚      6.5         â”‚              â”‚   â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚   â”‚
â”‚ â”‚ â”‚ Coherence &      â”‚ Coherence &      â”‚              â”‚   â”‚
â”‚ â”‚ â”‚ Cohesion: 7.0    â”‚ Cohesion: 7.0    â”‚              â”‚   â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚   â”‚
â”‚ â”‚ â”‚ Lexical Resource â”‚ Lexical Resource â”‚              â”‚   â”‚
â”‚ â”‚ â”‚      6.5         â”‚      6.0         â”‚              â”‚   â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚   â”‚
â”‚ â”‚ â”‚ Grammar: 7.0     â”‚ Grammar: 6.5     â”‚              â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ ğŸ“Š Detailed Feedback                                  â”‚   â”‚
â”‚ â”‚                                                        â”‚   â”‚
â”‚ â”‚ [View Task 1 Feedback] [View Task 2 Feedback]        â”‚   â”‚
â”‚ â”‚ [Download Full Report PDF]                            â”‚   â”‚
â”‚ â”‚ [Continue to Speaking Test]                           â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    User clicks "View Task 1 Feedback"
    â†“
[Detailed feedback page showing all evaluation details from AI]

END: Writing module complete with AI evaluation
``
